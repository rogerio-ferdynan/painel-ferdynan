
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Ferdynan - Sistema de Gest√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Painel de gest√£o OMNI LEGACY de Rog√©rio Ferdynan: vida, empresa, palco e sistema de arquivos integrados." />
  <style>
    :root {
      --bg: #050711;
      --bg-elevated: #0b111f;
      --brand: #111827;
      --accent: #d4a45a;
      --accent-soft: rgba(212, 164, 90, 0.14);
      --text: #f9fafb;
      --muted: #9ca3af;
      --border: #1f2933;
      --radius-lg: 18px;
      --radius-xl: 22px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.55);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #111827, var(--bg) 65%);
      color: var(--text);
      overflow-x: hidden;
    }

    .app {
      flex: 1;
      display: flex;
      min-height: 0;
      width: 100%;
      overflow-x: hidden;
    }

    .sidebar {
      width: 280px;
      padding: 20px 18px;
      border-right: 1px solid var(--border);
      background: linear-gradient(180deg, #111827, #050711);
      display: flex;
      flex-direction: column;
      gap: 18px;
      flex-shrink: 0;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-avatar {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #facc6b, var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      color: #111827;
      box-shadow: 0 0 0 3px rgba(212, 164, 90, 0.4);
    }

    .brand-text-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .brand-text-name {
      font-size: 15px;
      font-weight: 600;
    }

    .sidebar-section-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-top: 10px;
      margin-bottom: 5px;
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      border-radius: 999px;
      padding: 8px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .nav-item span.emoji {
      font-size: 18px;
      flex-shrink: 0;
    }

    .nav-item.active {
      background: linear-gradient(135deg, #d4a45a, #b97a34);
      color: #111827;
      border-color: rgba(212, 164, 90, 0.7);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.7);
    }

    .nav-item:not(.active):hover,
    .nav-item:focus-visible {
      background: rgba(15, 23, 42, 0.9);
      border-color: var(--border);
      color: #e5e7eb;
      outline: none;
    }

    .nav-item:focus-visible {
      box-shadow: 0 0 0 2px var(--accent);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--muted);
      border-top: 1px dashed var(--border);
      padding-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .sidebar-footer-line {
      font-size: 11px;
    }

    .main {
      flex: 1;
      min-width: 0;
      padding: 22px 28px 16px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      background: radial-gradient(circle at top, #0b1120, #020617);
    }

    .main-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .title-block h1 {
      font-size: 22px;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .title-block p {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(212, 164, 90, 0.7);
      white-space: nowrap;
    }

    .stats-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .stat-card {
      min-width: 130px;
      padding: 10px 12px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, #111827, #020617 65%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: all 0.2s ease;
      flex: 1 1 130px;
      max-width: 200px;
    }

    .stat-card:hover,
    .stat-card:focus-visible {
      border-color: var(--accent);
      transform: translateY(-2px);
      outline: none;
    }

    .stat-card:focus-visible {
      box-shadow: 0 0 0 2px var(--accent);
    }

    .stat-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 18px;
      font-weight: 600;
    }

    .stat-hint {
      font-size: 10px;
      color: var(--muted);
      margin-top: 2px;
    }

    .stat-progress {
      height: 4px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 6px;
    }

    .stat-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #d4a45a, #b97a34);
      width: 60%;
      transition: width 0.4s ease;
    }

    .progress-dashboard {
      background: rgba(11, 17, 31, 0.97);
      border-radius: var(--radius-xl);
      padding: 14px 16px 14px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .progress-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .progress-layout {
      display: flex;
      gap: 18px;
      align-items: center;
      flex-wrap: wrap;
    }

    .progress-ring-wrapper {
      position: relative;
      width: 96px;
      height: 96px;
      flex-shrink: 0;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 20%, #020617, #0b1120 70%);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
    }

    .progress-ring {
      transform: rotate(-90deg);
    }

    .progress-ring circle {
      transition: stroke-dashoffset 0.4s ease;
    }

    .progress-ring-bg {
      stroke: rgba(148, 163, 184, 0.4);
    }

    .progress-ring-value {
      stroke-linecap: round;
      filter: drop-shadow(0 0 8px rgba(212, 164, 90, 0.8));
    }

    .progress-ring-center {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }

    .progress-ring-percentage {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
    }

    .progress-ring-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-top: 2px;
    }

    .progress-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      flex: 1;
      width: 100%;
    }

    .progress-item {
      text-align: left;
    }

    .progress-number {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 2px;
    }

    .progress-label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    /* NOVO: se√ß√£o meta financeira + gadgets */
    .financial-and-gadgets {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.3fr);
      gap: 16px;
      align-items: stretch;
    }

    .finance-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 12px;
      align-items: flex-start;
    }

    .finance-summary {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
    }

    .finance-meta {
      font-size: 13px;
      font-weight: 600;
    }

    .finance-meta span {
      color: var(--accent);
    }

    .finance-bar {
      position: relative;
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      overflow: hidden;
      margin-top: 4px;
    }

    .finance-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #16a34a, #22c55e);
      transition: width 0.3s ease;
    }

    .finance-bar-label {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .finance-numbers {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin-top: 6px;
    }

    .finance-number-card {
      border-radius: 10px;
      border: 1px solid var(--border);
      background: radial-gradient(circle at top, #020617, #020617 70%);
      padding: 6px 8px;
      font-size: 11px;
    }

    .finance-number-label {
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 2px;
    }

    .finance-number-value {
      font-weight: 600;
      font-size: 13px;
    }

    .finance-inputs {
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .finance-input-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .finance-input-label {
      flex: 1;
    }

    .finance-input-label strong {
      display: block;
    }

    .finance-input-label small {
      display: block;
      color: var(--muted);
      font-size: 10px;
    }

    .finance-input-field {
      width: 70px;
      font-size: 12px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      text-align: center;
    }

    .finance-input-field:focus-visible {
      outline: 1px solid var(--accent);
      border-color: var(--accent);
    }

    .finance-status {
      font-size: 11px;
      margin-top: 4px;
      color: var(--muted);
    }

    .finance-status span {
      font-weight: 600;
    }

    .finance-status--ok span {
      color: #22c55e;
    }

    .finance-status--pending span {
      color: #f97316;
    }

    .finance-status--zero span {
      color: var(--muted);
    }

    .gadget-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-size: 12px;
    }

    .gadget-card {
      border-radius: 14px;
      border: 1px solid var(--border);
      background: radial-gradient(circle at top left, #111827, #020617 70%);
      padding: 8px 9px;
    }

    .gadget-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .gadget-body {
      font-size: 12px;
      color: var(--muted);
    }

    .gadget-links {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .gadget-embed {
      margin-top: 6px;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .content {
      display: grid;
      grid-template-columns: minmax(0, 2.4fr) minmax(0, 1.4fr);
      gap: 16px;
      align-items: flex-start;
    }

    .panel {
      background: rgba(11, 17, 31, 0.97);
      border-radius: var(--radius-xl);
      padding: 16px 16px 14px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      position: relative;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .panel-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
    }

    .panel-subtitle {
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      white-space: nowrap;
      background: rgba(15, 23, 42, 0.95);
    }

    /* INBOX RESPONSIVA */
    .columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 12px;
      align-items: flex-start;
      width: 100%;
    }

    .column {
      background: radial-gradient(circle at top left, #111827, #020617 65%);
      border-radius: 16px;
      padding: 10px 10px 8px;
      border: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      min-width: 0;
    }

    .column-header {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .column-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .column-tag {
      font-size: 10px;
      color: var(--muted);
      text-align: right;
      flex-shrink: 0;
    }

    .task-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: 210px;
      overflow-y: auto;
    }

    .task-list::-webkit-scrollbar {
      width: 6px;
    }

    .task-list::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.8);
      border-radius: 999px;
    }

    .task-list::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 999px;
    }

    .task {
      display: flex;
      align-items: flex-start;
      gap: 6px;
      font-size: 12px;
      padding: 5px 6px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .task:hover {
      background: rgba(15, 23, 42, 0.7);
    }

    .task input[type="checkbox"] {
      margin-top: 2px;
      cursor: pointer;
      flex-shrink: 0;
    }

    .task-text {
      flex: 1;
      min-width: 0;
    }

    .task-text div:first-child {
      font-weight: 500;
      color: #e5e7eb;
      margin-bottom: 2px;
      word-wrap: break-word;
    }

    .task.done {
      opacity: 0.6;
    }

    .task.done .task-text div:first-child {
      text-decoration: line-through;
    }

    .task-tag {
      font-size: 10px;
      color: var(--muted);
      margin-top: 0;
      word-wrap: break-word;
    }

    .task-actions {
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.2s ease;
      flex-shrink: 0;
    }

    .task:hover .task-actions {
      opacity: 1;
    }

    .task-action-btn {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      padding: 2px;
      border-radius: 4px;
    }

    .task-action-btn:hover {
      background: rgba(15, 23, 42, 0.95);
      color: var(--accent);
    }

    .task-footer {
      margin-top: 4px;
      border-top: 1px dashed var(--border);
      padding-top: 4px;
    }

    .task-form {
      display: flex;
      gap: 4px;
      margin-top: 4px;
    }

    .task-input {
      flex: 1;
      font-size: 11px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      min-width: 0;
    }

    .task-input:focus-visible {
      outline: 1px solid var(--accent);
      border-color: var(--accent);
    }

    .task-add-btn {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #111827;
      cursor: pointer;
      font-weight: 600;
      flex-shrink: 0;
    }

    .task-add-btn:hover {
      filter: brightness(1.05);
    }

    .module-body {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .module-list {
      list-style: none;
      padding-left: 0;
      margin: 6px 0 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .module-item-label {
      font-weight: 500;
      color: #e5e7eb;
    }

    .module-hint {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .muted {
      color: var(--muted);
      font-size: 11px;
    }

    .hint-click {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .module-actions {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .folder-action {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      border-radius: 6px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(212, 164, 90, 0.7);
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 4px;
    }

    .folder-action:hover,
    .folder-action:focus-visible {
      background: var(--accent);
      color: #111827;
      outline: none;
      box-shadow: 0 0 0 2px rgba(212, 164, 90, 0.4);
    }

    .module-links {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .link-chip {
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid var(--border);
      font-size: 11px;
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .link-chip span.emoji {
      font-size: 14px;
    }

    .link-chip:hover,
    .link-chip:focus-visible {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      outline: none;
    }

    .export-section {
      margin-top: 12px;
      padding: 10px 12px;
      background: rgba(15, 23, 42, 0.98);
      border-radius: 12px;
      border: 1px dashed var(--border);
    }

    .export-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      gap: 8px;
      flex-wrap: wrap;
    }

    .export-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .export-btn {
      background: linear-gradient(135deg, #16a34a, #15803d);
      color: #f9fafb;
      border: none;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
    }

    .export-btn:hover,
    .export-btn:focus-visible {
      filter: brightness(1.05);
      outline: none;
      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.5);
    }

    .notification {
      position: fixed;
      bottom: 16px;
      right: 16px;
      background: var(--accent);
      color: #111827;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      z-index: 1000;
      animation: slideIn 0.3s ease;
      max-width: min(320px, 100% - 32px);
      box-sizing: border-box;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .app-footer {
      border-top: 1px solid rgba(15, 23, 42, 0.95);
      background: radial-gradient(circle at bottom, #020617, #050711 60%);
      padding: 10px 22px 12px;
    }

    .footer-inner {
      max-width: 1180px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .footer-primary {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .footer-name {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .footer-name span {
      font-weight: 400;
      opacity: 0.9;
      margin-left: 4px;
    }

    .footer-roles {
      font-size: 11px;
      color: var(--muted);
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin-top: 2px;
    }

    .footer-col {
      font-size: 11px;
      color: var(--muted);
    }

    .footer-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 2px;
      color: #d1d5db;
    }

    .footer-text {
      margin-bottom: 4px;
      line-height: 1.35;
    }

    .footer-text a {
      color: #e5e7eb;
      text-decoration: none;
      border-bottom: 1px dashed rgba(148, 163, 184, 0.4);
    }

    .footer-text a:hover,
    .footer-text a:focus-visible {
      color: var(--accent);
      border-bottom-style: solid;
      outline: none;
    }

    .footer-meta {
      font-size: 10px;
      color: #e5e7eb;
      border-top: 1px dashed rgba(31, 41, 55, 0.95);
      padding-top: 4px;
      margin-top: 2px;
      display: flex;
      justify-content: flex-start;
    }

    .footer-meta-line {
      white-space: nowrap;
      text-align: left;
    }

    @media (max-width: 900px) {
      .app {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }
      .main {
        padding: 16px 16px 10px;
      }
      .content {
        grid-template-columns: 1fr;
      }
      .stats-row {
        justify-content: flex-start;
      }
      .financial-and-gadgets {
        grid-template-columns: 1fr;
      }
      .finance-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 720px) {
      .footer-grid {
        grid-template-columns: 1fr;
      }
      .footer-meta {
        justify-content: center;
      }
      .footer-meta-line {
        white-space: normal;
        text-align: center;
      }
      .title-block h1 {
        font-size: 18px;
      }
      .badge {
        font-size: 10px;
      }
    }

    @media (max-width: 600px) {
      .panel {
        padding: 14px 12px;
      }
      .progress-layout {
        flex-direction: column;
        align-items: flex-start;
      }
      .progress-ring-wrapper {
        margin-bottom: 4px;
      }
    }

    @media (max-width: 480px) {
      .main {
        padding: 12px 10px 8px;
      }
      .sidebar {
        padding: 12px 12px;
      }
      .nav-item {
        font-size: 12px;
      }
      .panel-title {
        font-size: 11px;
        letter-spacing: 0.12em;
      }
      .panel-subtitle {
        font-size: 11px;
      }
      .footer-name {
        font-size: 12px;
      }
      .footer-roles,
      .footer-col {
        font-size: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar" aria-label="Navega√ß√£o principal">
      <div class="brand">
        <div class="brand-avatar" aria-hidden="true">RF</div>
        <div>
          <div class="brand-text-title">Painel de comando</div>
          <div class="brand-text-name">rogerioferdynan.com</div>
        </div>
      </div>

      <div>
        <h2 class="sidebar-section-title">N√∫cleos principais</h2>
        <ul class="nav-list" id="nav-list">
          <li
            class="nav-item active"
            data-module="inbox"
            role="button"
            tabindex="0"
            aria-current="page"
          >
            <span class="emoji" aria-hidden="true">üì®</span>
            <span>00 ¬∑ Inbox Operacional</span>
          </li>
          <li class="nav-item" data-module="artista" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üé§</span>
            <span>01 ¬∑ Artista Rog√©rio Ferdynan</span>
          </li>
          <li class="nav-item" data-module="empresa" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üíº</span>
            <span>02 ¬∑ Empresa CNPJ</span>
          </li>
          <li class="nav-item" data-module="pessoal" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üë®‚Äçüë¶</span>
            <span>03 ¬∑ Pessoal CPF</span>
          </li>
          <li class="nav-item" data-module="direcao" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üß†</span>
            <span>04 ¬∑ Dire√ß√£o Criativa</span>
          </li>
          <li class="nav-item" data-module="agenda" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üìÖ</span>
            <span>05 ¬∑ Agenda & Log√≠stica</span>
          </li>
          <li class="nav-item" data-module="backup" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üîí</span>
            <span>06 ¬∑ Backup / Arquivo Morto</span>
          </li>
          <li class="nav-item" data-module="venda" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üí•</span>
            <span>07 ¬∑ Venda Mensal</span>
          </li>
          <li class="nav-item" data-module="centro" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üß©</span>
            <span>08 ¬∑ Centro de Controle</span>
          </li>
          <li class="nav-item" data-module="rede" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üåé</span>
            <span>09 ¬∑ Rede Global</span>
          </li>
          <li class="nav-item" data-module="modelos" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üßæ</span>
            <span>10 ¬∑ Modelos Oficiais</span>
          </li>
          <li class="nav-item" data-module="admin" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üß∞</span>
            <span>11 ¬∑ Admin do Sistema</span>
          </li>
          <li class="nav-item" data-module="resultados" role="button" tabindex="0">
            <span class="emoji" aria-hidden="true">üéØ</span>
            <span>12 ¬∑ Resultados Finais</span>
          </li>
        </ul>
      </div>

      <footer class="sidebar-footer">
        <div class="sidebar-footer-line">OMNI LEGACY 8.0</div>
        <div class="muted">
          Tarefas geram arquivos espelho na arquitetura OMNI, mantendo tudo rastre√°vel.
        </div>
      </footer>
    </aside>

    <main class="main" role="main">
      <header class="main-header">
        <div class="title-block">
          <h1>
            Ferdynan Produ√ß√µes
            <span class="badge">Sistema de Gest√£o 2025</span>
          </h1>
          <p>Vis√£o t√°tica do dia a dia ¬∑ Orquestra√ß√£o de vida, empresa e palco.</p>
        </div>

        <div class="stats-row" aria-label="Indicadores principais">
          <div
            class="stat-card"
            data-stat="shows"
            role="button"
            tabindex="0"
            aria-label="Editar quantidade de shows no m√™s"
          >
            <div class="stat-label">Shows no m√™s</div>
            <div class="stat-value" id="stat-shows">12</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-shows"></div>
            </div>
            <div class="stat-hint">Clique ou pressione Enter para ajustar</div>
          </div>
          <div
            class="stat-card"
            data-stat="faturamento"
            role="button"
            tabindex="0"
            aria-label="Editar faturamento do m√™s"
          >
            <div class="stat-label">Faturamento</div>
            <div class="stat-value" id="stat-faturamento">R$ 85.000</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-faturamento"></div>
            </div>
            <div class="stat-hint">Clique ou pressione Enter para ajustar</div>
          </div>
          <div
            class="stat-card"
            data-stat="propostas"
            role="button"
            tabindex="0"
            aria-label="Editar n√∫mero de propostas abertas"
          >
            <div class="stat-label">Propostas abertas</div>
            <div class="stat-value" id="stat-propostas">7</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-propostas"></div>
            </div>
            <div class="stat-hint">Clique ou pressione Enter para ajustar</div>
          </div>
        </div>
      </header>

      <section class="progress-dashboard" aria-labelledby="progresso-dia-titulo">
        <div class="progress-header">
          <h2 class="progress-title" id="progresso-dia-titulo">Progresso do dia</h2>
        </div>

        <div class="progress-layout">
          <div class="progress-ring-wrapper" aria-hidden="true">
            <svg class="progress-ring" width="96" height="96">
              <defs>
                <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#d4a45a" />
                  <stop offset="100%" stop-color="#b97a34" />
                </linearGradient>
              </defs>
              <circle
                class="progress-ring-bg"
                stroke-width="6"
                fill="transparent"
                r="38"
                cx="48"
                cy="48"
              ></circle>
              <circle
                id="progress-ring-circle"
                class="progress-ring-value"
                stroke="url(#progressGradient)"
                stroke-width="6"
                fill="transparent"
                r="38"
                cx="48"
                cy="48"
                stroke-dasharray="0 0"
                stroke-dashoffset="0"
              ></circle>
            </svg>
            <div class="progress-ring-center">
              <div class="progress-ring-percentage" id="progress-ring-percentage">0%</div>
              <div class="progress-ring-label">do dia</div>
            </div>
          </div>

          <div class="progress-stats" aria-label="Resumo de tarefas do dia">
            <div class="progress-item">
              <div class="progress-number" id="progress-total">0</div>
              <div class="progress-label">Total de tarefas</div>
            </div>
            <div class="progress-item">
              <div class="progress-number" id="progress-done">0</div>
              <div class="progress-label">Conclu√≠das</div>
            </div>
            <div class="progress-item">
              <div class="progress-number" id="progress-pending">0</div>
              <div class="progress-label">Pendentes</div>
            </div>
            <div class="progress-item">
              <div class="progress-number" id="progress-score">0/10</div>
              <div class="progress-label">√çndice de foco</div>
            </div>
          </div>
        </div>
      </section>

      <!-- NOVA SE√á√ÉO: META FINANCEIRA + GADGETS -->
      <section class="financial-and-gadgets" aria-label="Meta financeira e utilidades">
        <section class="panel" aria-labelledby="finance-title">
          <div class="panel-header">
            <div>
              <h2 class="panel-title" id="finance-title">Meta financeira do m√™s</h2>
              <p class="panel-subtitle">
                Meta l√≠quida para limpar contas e respirar: R$ 10.000 livres, j√° considerando custos.
              </p>
            </div>
            <div class="pill">Planejamento de shows</div>
          </div>

          <div class="finance-grid">
            <div class="finance-summary">
              <div class="finance-meta">
                Meta l√≠quida: <span id="finance-meta">R$ 10.000</span>
              </div>

              <div class="finance-bar" aria-hidden="true">
                <div class="finance-bar-fill" id="finance-bar-fill"></div>
              </div>
              <div class="finance-bar-label" id="finance-bar-label">
                0% da meta alcan√ßada
              </div>

              <div class="finance-numbers">
                <div class="finance-number-card">
                  <div class="finance-number-label">Receita bruta</div>
                  <div class="finance-number-value" id="finance-bruto">R$ 0</div>
                </div>
                <div class="finance-number-card">
                  <div class="finance-number-label">Custos estimados</div>
                  <div class="finance-number-value" id="finance-custos">R$ 0</div>
                </div>
                <div class="finance-number-card">
                  <div class="finance-number-label">Lucro l√≠quido</div>
                  <div class="finance-number-value" id="finance-liquido">R$ 0</div>
                </div>
                <div class="finance-number-card">
                  <div class="finance-number-label">Shows pequenos faltantes</div>
                  <div class="finance-number-value" id="finance-faltam-shows">0</div>
                </div>
              </div>

              <p class="module-hint">
                L√≥gica: show padr√£o (R$ 500) deixa <strong>R$ 200 livres</strong>. Show premium
                (R$ 5.000) deixa <strong>R$ 2.000 livres</strong>. A meta √© bater R$ 10.000 de lucro l√≠quido.
              </p>

              <p class="finance-status finance-status--zero" id="finance-status">
                Situa√ß√£o: <span>meta ainda n√£o iniciada.</span>
              </p>
            </div>

            <div class="finance-inputs" aria-label="Configura√ß√£o de shows para meta financeira">
              <div class="finance-input-row">
                <div class="finance-input-label">
                  <strong>Shows padr√£o</strong>
                  <small>Cach√™ R$ 500 ¬∑ Custo R$ 300 ¬∑ Lucro R$ 200</small>
                </div>
                <input
                  type="number"
                  id="shows-pequenos"
                  class="finance-input-field"
                  min="0"
                  step="1"
                  value="0"
                  aria-label="Quantidade de shows padr√£o no m√™s"
                />
              </div>

              <div class="finance-input-row">
                <div class="finance-input-label">
                  <strong>Shows premium</strong>
                  <small>Cach√™ R$ 5.000 ¬∑ Custo R$ 3.000 ¬∑ Lucro R$ 2.000</small>
                </div>
                <input
                  type="number"
                  id="shows-grandes"
                  class="finance-input-field"
                  min="0"
                  step="1"
                  value="0"
                  aria-label="Quantidade de shows premium no m√™s"
                />
              </div>

              <p class="module-hint">
                Exemplo: s√≥ com shows de R$ 500, voc√™ precisaria de
                <strong>50 shows</strong> (50 √ó 200 = 10.000). J√° com 2 shows premium (2 √ó 2.000 = 4.000),
                a meta cai para 30 shows pequenos (30 √ó 200 = 6.000).
              </p>
            </div>
          </div>
        </section>

        <aside class="panel panel-gadgets" aria-label="Gadgets r√°pidos">
          <div class="panel-header">
            <div>
              <h2 class="panel-title">Gadgets ¬∑ Clima & M√∫sica</h2>
              <p class="panel-subtitle">
                Atalhos para cuidar do corpo, voz e vibe antes dos shows.
              </p>
            </div>
            <div class="pill">Suporte di√°rio</div>
          </div>

          <div class="gadget-grid">
            <div class="gadget-card">
              <div class="gadget-title">
                <span aria-hidden="true">‚õÖ</span>
                Clima ¬∑ Lagoa da Prata & BH
              </div>
              <div class="gadget-body">
                Veja o tempo antes de pegar estrada ou marcar ensaio ao ar livre.
                <div class="gadget-links">
                  <a
                    href="https://www.climatempo.com.br/previsao-do-tempo/cidade/330/lagoadaprata-mg"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">üìç</span><span>Lagoa da Prata</span>
                  </a>
                  <a
                    href="https://www.climatempo.com.br/previsao-do-tempo/cidade/321/belohorizonte-mg"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">üèôÔ∏è</span><span>Belo Horizonte</span>
                  </a>
                  <a
                    href="https://weather.com/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">üåé</span><span>Weather.com</span>
                  </a>
                </div>
              </div>
            </div>

            <div class="gadget-card">
              <div class="gadget-title">
                <span aria-hidden="true">üéß</span>
                M√∫sica & Ferramentas de palco
              </div>
              <div class="gadget-body">
                Afinar, marcar BPM e entrar no clima certo antes de subir no palco.
                <div class="gadget-links">
                  <a
                    href="https://tuner.ninja/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">üé∏</span><span>Afinador online</span>
                  </a>
                  <a
                    href="https://www.flutetunes.com/metronome/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">‚è±Ô∏è</span><span>Metr√¥nomo</span>
                  </a>
                  <a
                    href="https://music.youtube.com/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="link-chip"
                  >
                    <span class="emoji">‚ñ∂Ô∏è</span><span>YouTube Music</span>
                  </a>
                </div>
                <div class="gadget-embed" aria-label="Player do Spotify">
                  <iframe
                    style="border-radius:0; width:100%; height:120px;"
                    src="https://open.spotify.com/embed/artist/570xnV2TU8QMAZGFDpVf5E"
                    width="100%"
                    height="120"
                    frameborder="0"
                    allowfullscreen=""
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                    loading="lazy"
                  ></iframe>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </section>

      <section class="content" aria-label="Inbox e n√∫cleo selecionado">
        <section class="panel" aria-labelledby="inbox-titulo">
          <div class="panel-header">
            <div>
              <h2 class="panel-title" id="inbox-titulo">Inbox ¬∑ Caixa de Entrada Operacional</h2>
              <p class="panel-subtitle">
                Tudo que chega primeiro cai aqui. Depois voc√™ envia para o n√∫cleo certo.
              </p>
            </div>
            <div class="pill">Foco de hoje</div>
          </div>

          <div class="columns" id="columns" aria-label="Colunas de tarefas"></div>
        </section>

        <aside class="panel" aria-labelledby="module-title">
          <div class="panel-header">
            <div>
              <h2 class="panel-title" id="module-title">
                00 ¬∑ Inbox Operacional
              </h2>
              <p class="panel-subtitle" id="module-subtitle">
                Processar, decidir, delegar. Nada dorme na sua cabe√ßa: tudo vem pra c√°.
              </p>
            </div>
            <div class="pill" id="module-tag">Vis√£o r√°pida do n√∫cleo</div>
          </div>

          <div class="module-body" id="module-body"></div>
          
          <div class="module-actions">
            <button class="folder-action" id="copy-folder-btn" type="button">
              <span aria-hidden="true">üìÅ</span> Copiar caminho da pasta
            </button>
            <button class="folder-action" id="export-tasks-btn" type="button">
              <span aria-hidden="true">üíæ</span> Exportar tarefas (.txt)
            </button>
          </div>

          <div class="export-section">
            <div class="export-header">
              <div class="export-title">Exporta√ß√£o di√°ria</div>
              <button class="export-btn" id="export-daily-btn" type="button">üìã Gerar ATA do dia</button>
            </div>
            <p class="module-hint">
              Gera um relat√≥rio das tarefas conclu√≠das hoje em formato profissional (.txt).
            </p>
          </div>
        </aside>
      </section>
      <p class="hint-click">
        üí° Dica: use este painel como rotina di√°ria ‚Äî abrir, ver a Inbox, marcar o que foi feito
        e decidir o que vai pra qual n√∫cleo (Artista, Empresa, Agenda, etc.).
      </p>
    </main>
  </div>

  <footer class="app-footer" aria-label="Informa√ß√µes de contato e cr√©ditos">
    <div class="footer-inner">
      <div class="footer-primary">
        <div class="footer-name">
          Rog√©rio Geraldo Lopes <span>(Ferdynan)</span>
        </div>
        <div class="footer-roles">
          Cantor | Produtor Musical | Instrutor de M√∫sica
        </div>
      </div>

      <div class="footer-grid">
        <div class="footer-col">
          <div class="footer-label">Endere√ßo</div>
          <div class="footer-text">
            Rua Amazonas, n¬∫ 124, Bairro Mar√≠lia,<br />
            Lagoa da Prata/MG ‚Äì CEP 35592-220
          </div>
          <div class="footer-text">
            Escrit√≥rio Central: Belo Horizonte ‚Äì MG<br />
            Unidade Operacional: Lagoa da Prata ‚Äì MG
          </div>
        </div>

        <div class="footer-col">
          <div class="footer-label">Contato</div>
          <div class="footer-text">
            Telefone: (31) 98506-5356 | (37) 99123-3577
          </div>
          <div class="footer-text">
            E-mail:
            <a href="mailto:contato@rogerioferdynan.com">contato@rogerioferdynan.com</a>
          </div>
          <div class="footer-text">
            Website:
            <a href="https://rogerioferdynan.com/" target="_blank" rel="noopener noreferrer">rogerioferdynan.com</a>
          </div>
        </div>

        <div class="footer-col">
          <div class="footer-label">Canais digitais</div>
          <div class="footer-text">
            <a href="https://rogerioferdynan.com/" target="_blank" rel="noopener noreferrer">Site oficial</a><br />
            <a href="https://painel.rogerioferdynan.com/" target="_blank" rel="noopener noreferrer">painel.rogerioferdynan.com</a><br />
            <a href="https://blog.rogerioferdynan.com/" target="_blank" rel="noopener noreferrer">blog.rogerioferdynan.com</a><br />
            <a href="https://open.spotify.com/artist/570xnV2TU8QMAZGFDpVf5E" target="_blank" rel="noopener noreferrer">Spotify ¬∑ Perfil do Artista</a>
          </div>
          <div class="footer-label">Redes sociais</div>
          <div class="footer-text">
            <a href="https://www.instagram.com/rogerioferdynan" target="_blank" rel="noopener noreferrer">Instagram</a> ¬∑
            <a href="https://www.bandsintown.com/pt/a/15376245-rogerio-ferdynan" target="_blank" rel="noopener noreferrer">Bandsintown</a> ¬∑
            <a href="https://x.com/rogerioferdynan" target="_blank" rel="noopener noreferrer">Twitter/X</a>
          </div>
        </div>
      </div>

      <div class="footer-meta">
        <span class="footer-meta-line">
          ¬© Todos os direitos reservados ¬∑ Ferdynan Produ√ß√µes ¬∑ 2025 ¬∑ CNPJ: 59.765.869/0001-70 ¬∑ OMNI LEGACY 8.0
        </span>
      </div>
    </div>
  </footer>

  <script>
    function clone(obj) {
      return JSON.parse(JSON.stringify(obj));
    }

    const STORAGE_KEY = "painelFerdynan_v4";

    const defaultState = {
      stats: {
        shows: 12,
        faturamento: "R$ 85.000",
        propostas: 7
      },
      inbox: {
        aProcessar: [
          {
            id: "t1",
            text: "Revisar proposta Prefeitura de BH",
            done: false,
            tag: "Empresa ¬∑ Propostas_Contratos",
            createdAt: new Date().toISOString()
          },
          {
            id: "t2x",
            text: "Atualizar Repert√≥rio",
            done: false,
            tag: "Dire√ß√£o Criativa ¬∑ Repertorio",
            createdAt: new Date().toISOString()
          },
          {
            id: "t3x",
            text: "Fazer outro ensaio em est√∫dio",
            done: false,
            tag: "Artista ¬∑ Fotos_Profissionais",
            createdAt: new Date().toISOString()
          }
        ],
        alta: [
          {
            id: "t2",
            text: "Enviar material para r√°dio",
            done: false,
            tag: "Artista ¬∑ Midia_Jornal_TV_Radio",
            createdAt: new Date().toISOString()
          },
          {
            id: "t2y",
            text: "CNH - Olhar documentos",
            done: false,
            tag: "Pessoal ¬∑ Documentos_Civis",
            createdAt: new Date().toISOString()
          }
        ],
        media: [
          {
            id: "t3",
            text: "Agendar ensaio fotogr√°fico",
            done: false,
            tag: "Artista ¬∑ Fotos_Profissionais",
            createdAt: new Date().toISOString()
          }
        ],
        delegar: [
          {
            id: "t4",
            text: "Editar v√≠deo do show em SP",
            done: false,
            tag: "Artista ¬∑ Videos_de_Show",
            createdAt: new Date().toISOString()
          },
          {
            id: "t5",
            text: "Atualizar planilha financeira",
            done: false,
            tag: "Empresa ¬∑ Tabelas_Precos_Planilhas",
            createdAt: new Date().toISOString()
          },
          {
            id: "t6",
            text: "Enviar NF para contabilidade",
            done: false,
            tag: "Empresa ¬∑ Notas_Fiscais_Pagamentos",
            createdAt: new Date().toISOString()
          }
        ]
      }
    };

    let state = loadState();
    let currentModule = "inbox";

    const folderMap = {
      inbox: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\00_üì® INBOX ‚Äì CAIXA DE ENTRADA OPERACIONAL",
      artista: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\01_üé§ ARTISTA_ROGERIO_FERDYNAN",
      empresa: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\02_üíº EMPRESA_CNPJ_FERDYNAN_PRODUCOES",
      pessoal: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\03_üë®‚Äçüë¶ PESSOAL_CPF_ROGERIO_GERALDO_LOPES",
      direcao: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\04_üß† DIRECAO_CRIATIVA_CONTEUDO",
      agenda: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\05_üìÖ AGENDA_LOGISTICA",
      backup: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\06_üîí BACKUP_ARQUIVO_MORTO",
      venda: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\07_üí• VENDA_MENSAL_MISSAO",
      centro: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\08_üß© CENTRO_CONTROLE_CONEXOES",
      rede: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\09_üåé REDE_GLOBAL",
      modelos: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\10_üßæ MODELOS_OFICIAIS",
      admin: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\11_üß∞ ADMIN_SISTEMA",
      resultados: "D:\\FERDYNAN_LEGACY_SYSTEM_2025\\12_üéØ RESULTADOS_FINAIS"
    };

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return clone(defaultState);
        const parsed = JSON.parse(raw);
        return Object.assign(clone(defaultState), parsed);
      } catch (e) {
        console.error("Erro carregando estado, usando padr√£o", e);
        return clone(defaultState);
      }
    }

    function saveState() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        updateProgressDashboard();
      } catch (e) {
        console.error("Erro salvando estado", e);
      }
    }

    function updateProgressDashboard() {
      let totalTasks = 0;
      let doneTasks = 0;

      Object.values(state.inbox).forEach(function (col) {
        col.forEach(function (task) {
          totalTasks++;
          if (task.done) doneTasks++;
        });
      });

      const percentage = totalTasks > 0 ? Math.round((doneTasks / totalTasks) * 100) : 0;
      const pending = totalTasks - doneTasks;

      const totalEl = document.getElementById("progress-total");
      const doneEl = document.getElementById("progress-done");
      const pendingEl = document.getElementById("progress-pending");
      const ringPctEl = document.getElementById("progress-ring-percentage");
      const scoreEl = document.getElementById("progress-score");

      if (totalEl) totalEl.textContent = String(totalTasks);
      if (doneEl) doneEl.textContent = String(doneTasks);
      if (pendingEl) pendingEl.textContent = String(pending);
      if (ringPctEl) ringPctEl.textContent = percentage + "%";

      const focusScore = totalTasks > 0 ? percentage / 10 : 0;
      if (scoreEl) {
        scoreEl.textContent = focusScore.toFixed(1).replace(".", ",") + "/10";
      }

      const circle = document.getElementById("progress-ring-circle");
      if (circle) {
        const radius = circle.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        circle.style.strokeDasharray = circumference + " " + circumference;
        const offset = circumference - (percentage / 100) * circumference;
        circle.style.strokeDashoffset = offset;
      }
    }

    function getPendingTasksCount() {
      let pending = 0;
      Object.values(state.inbox).forEach(function (col) {
        col.forEach(function (task) {
          if (!task.done) pending++;
        });
      });
      return pending;
    }

    function renderStats() {
      const showsEl = document.getElementById("stat-shows");
      const fatEl = document.getElementById("stat-faturamento");
      const propEl = document.getElementById("stat-propostas");

      if (showsEl) showsEl.textContent = String(state.stats.shows);
      if (fatEl) fatEl.textContent = state.stats.faturamento;
      if (propEl) propEl.textContent = String(state.stats.propostas);

      const barShows = document.getElementById("bar-shows");
      const barFat = document.getElementById("bar-faturamento");
      const barProp = document.getElementById("bar-propostas");

      if (barShows) barShows.style.width = "80%";
      if (barFat) barFat.style.width = "65%";
      if (barProp) barProp.style.width = "45%";
    }

    function setupStatsEditing() {
      document.querySelectorAll(".stat-card").forEach(function (card) {
        function handleEdit() {
          const type = card.getAttribute("data-stat");
          if (!type) return;
          let current = state.stats[type];
          const labelMap = {
            shows: "Quantos shows no m√™s?",
            faturamento: "Qual o faturamento (ex.: R$ 85.000)?",
            propostas: "Quantas propostas abertas?"
          };
          const label = labelMap[type] || "Valor";

          const value = window.prompt(label, String(current));
          if (value === null || value === "") return;

          if (type === "shows" || type === "propostas") {
            const num = parseInt(value, 10);
            if (!isNaN(num)) {
              state.stats[type] = num;
            } else {
              state.stats[type] = value;
            }
          } else {
            state.stats[type] = value;
          }
          saveState();
          renderStats();
        }

        card.addEventListener("click", handleEdit);
        card.addEventListener("keydown", function (e) {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            handleEdit();
          }
        });
      });
    }

    const columnsConfig = [
      { key: "aProcessar", title: "A PROCESSAR", titleShort: "A_PROCESSAR", tag: "Entrou agora" },
      { key: "alta",       title: "ALTA",        titleShort: "ALTA",        tag: "Impacto direto" },
      { key: "media",      title: "M√âDIA",       titleShort: "MEDIA",       tag: "Importante, n√£o urgente" },
      { key: "delegar",    title: "DELEGAR",     titleShort: "DELEGAR",     tag: "Equipe / parceiros" }
    ];

    function renderInbox() {
      const container = document.getElementById("columns");
      if (!container) return;
      container.innerHTML = "";

      columnsConfig.forEach(function (col) {
        const columnEl = document.createElement("div");
        columnEl.className = "column";

        const headerEl = document.createElement("div");
        headerEl.className = "column-header";

        const titleEl = document.createElement("div");
        titleEl.className = "column-title";
        titleEl.textContent = col.title;

        const tagEl = document.createElement("div");
        tagEl.className = "column-tag";
        tagEl.textContent = col.tag;

        headerEl.appendChild(titleEl);
        headerEl.appendChild(tagEl);
        columnEl.appendChild(headerEl);

        const listEl = document.createElement("ul");
        listEl.className = "task-list";

        const tasks = state.inbox[col.key] || [];

        tasks.forEach(function (task) {
          const li = document.createElement("li");
          li.className = "task" + (task.done ? " done" : "");
          li.setAttribute("data-task-id", task.id);

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = task.done;

          checkbox.addEventListener("click", function (e) {
            e.stopPropagation();
            task.done = checkbox.checked;
            if (task.done) {
              li.classList.add("done");
              task.completedAt = new Date().toISOString();
            } else {
              li.classList.remove("done");
              delete task.completedAt;
            }
            saveState();
          });

          const textWrapper = document.createElement("div");
          textWrapper.className = "task-text";

          const mainText = document.createElement("div");
          mainText.textContent = task.text;
          textWrapper.appendChild(mainText);

          if (task.tag) {
            const tagDiv = document.createElement("div");
            tagDiv.className = "task-tag";
            tagDiv.textContent = task.tag;
            textWrapper.appendChild(tagDiv);
          }

          const actionsWrapper = document.createElement("div");
          actionsWrapper.className = "task-actions";

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "task-action-btn";
          deleteBtn.type = "button";
          deleteBtn.innerHTML = "üóëÔ∏è";
          deleteBtn.title = "Remover tarefa";

          deleteBtn.addEventListener("click", function (e) {
            e.stopPropagation();
            if (window.confirm("Remover esta tarefa permanentemente?")) {
              const idx = state.inbox[col.key].findIndex(function (t) {
                return t.id === task.id;
              });
              if (idx > -1) {
                state.inbox[col.key].splice(idx, 1);
                saveState();
                renderInbox();
              }
            }
          });

          actionsWrapper.appendChild(deleteBtn);

          li.appendChild(checkbox);
          li.appendChild(textWrapper);
          li.appendChild(actionsWrapper);
          listEl.appendChild(li);
        });

        columnEl.appendChild(listEl);

        const footer = document.createElement("div");
        footer.className = "task-footer";

        const form = document.createElement("form");
        form.className = "task-form";

        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "Nova tarefa...";
        input.className = "task-input";
        input.setAttribute("aria-label", "Nova tarefa na coluna " + col.title);

        const btn = document.createElement("button");
        btn.type = "submit";
        btn.textContent = "+";
        btn.className = "task-add-btn";
        btn.setAttribute("aria-label", "Adicionar tarefa em " + col.title);

        form.addEventListener("submit", function (e) {
          e.preventDefault();
          const value = input.value.trim();
          if (!value) return;

          const tagOptions = [
            "Inbox ¬∑ 01_‚ö° A_PROCESSAR",
            "Inbox ¬∑ 02_üë• DELEGAR_EQUIPE",
            "Inbox ¬∑ 03_üí° INSPIRACOES_RAPIDAS",
            "Inbox ¬∑ 04_üåê REFERENCIAS_EXTERNAS",

            "Artista ¬∑ 01_üì∏ Fotos_Profissionais",
            "Artista ¬∑ 02_üé• Videos_de_Show",
            "Artista ¬∑ 03_üéµ Repertorio",
            "Artista ¬∑ 04_üñºÔ∏è Divulgacao_Capas_Stories",
            "Artista ¬∑ 05_üìÇ Portfolio",
            "Artista ¬∑ 06_üó∫Ô∏è Cartazes_Por_Cidade",
            "Artista ¬∑ 07_üìª Midia_Jornal_TV_Radio",

            "Empresa ¬∑ 01_üìÑ Propostas_Contratos",
            "Empresa ¬∑ 02_üí∞ Notas_Fiscais_Pagamentos",
            "Empresa ¬∑ 03_üßæ CNPJ_Documentos_Oficiais",
            "Empresa ¬∑ 04_üèôÔ∏è Clientes_Prefeituras",
            "Empresa ¬∑ 05_üè¶ Contabilidade_Bancos",
            "Empresa ¬∑ 06_üìä Tabelas_Precos_Planilhas",
            "Empresa ¬∑ 07_ü§ù Parcerias_Comerciais",
            "Empresa ¬∑ 08_üßæ Editais_Processos_Publicos",
            "Empresa ¬∑ 09_üë• RH_Equipe",

            "Pessoal ¬∑ 01_üìú Comprovantes_Declaracoes",
            "Pessoal ¬∑ 02_üíä Saude_Mental_Suplementacao",
            "Pessoal ¬∑ 03_üë¶ Filho_Mikael",
            "Pessoal ¬∑ 04_üßò Reflexoes_Escritos_Pessoais",
            "Pessoal ¬∑ 05_üë®‚Äçüë©‚Äçüëß Familia_Assuntos_Juridicos",
            "Pessoal ¬∑ 07_üóÇÔ∏è Organizacao_Pessoal_Notion",
            "Pessoal ¬∑ 08_üìö Documentos_Civis",

            "Agenda ¬∑ 01_üéüÔ∏è Shows_Confirmados",
            "Agenda ¬∑ 02_üí¨ Shows_Negociacao",
            "Agenda ¬∑ 03_üóìÔ∏è Agenda_Mensal",
            "Agenda ¬∑ 04_‚úÖ Checklist_Show",
            "Agenda ¬∑ 05_üõ£Ô∏è Relatorios_Deslocamentos",
            "Agenda ¬∑ 06_‚öôÔ∏è Equipamentos_Carga",
            "Agenda ¬∑ 07_üë∑ Equipe_Tecnica_Apoio",
            "Agenda ¬∑ 08_üé§ Requisitos_Camarim_Rider_Tecnico",

            "Backup ¬∑ 01_üï∞Ô∏è Fotos_Antigas",
            "Backup ¬∑ 02_üóûÔ∏è Campanhas_Encerradas_LogOff",
            "Backup ¬∑ 03_üóÉÔ∏è Pastas_Antigas",
            "Backup ¬∑ 04_üì± Prints_WhatsApp",

            "Venda ¬∑ 01_üì∞ Cartazes_Atualizados",
            "Venda ¬∑ 02_üìò Portfolio_PDF",
            "Venda ¬∑ 03_üí¨ Texto_WhatsApp_Venda",
            "Venda ¬∑ 04_üî• Contatos_Quentes",
            "Venda ¬∑ 05_üìÑ Propostas_Contratos",
            "Venda ¬∑ 06_üí∏ Pagamentos_Pendencias",
            "Venda ¬∑ 07_üéûÔ∏è Videos_Enviar",

            "Centro ¬∑ 01_üó∫Ô∏è Mapa_Geral_Pastas",
            "Centro ¬∑ 02_üßæ Fluxos_Checklists",
            "Centro ¬∑ 03_üîó Integracoes_Estrategicas",
            "Centro ¬∑ 04_üß± Modelos_Universais",
            "Centro ¬∑ 05_üìÜ Painel_Mensal_Missoes",

            "Modelos Oficiais ¬∑ 01_üß† Apresentacoes",
            "Modelos Oficiais ¬∑ 02_üìÑ Docs",
            "Modelos Oficiais ¬∑ 03_üñºÔ∏è Identidade_Visual",
            "Modelos Oficiais ¬∑ 04_üìä Planilhas",

            "Admin ¬∑ üîó _ATALHOS",
            "Admin ¬∑ ‚öôÔ∏è Administra√ß√£o, scripts e atalhos internos",

            "Resultados ¬∑ 01_üíº Clientes",
            "Resultados ¬∑ 02_üì∞ Imprensa",
            "Resultados ¬∑ 03_üì± Social",

            "Direcao Criativa ¬∑ 01_üì¢ Posts_Prontos",
            "Direcao Criativa ¬∑ 02_üé¨ Modelos_Reels",
            "Direcao Criativa ¬∑ 03_üè∑Ô∏è Logos_Branding",
            "Direcao Criativa ¬∑ 04_üéß Musicas_Em_Andamento",
            "Direcao Criativa ¬∑ 05_üíø Capas_Estetica_Albuns",
            "Direcao Criativa ¬∑ 06_üß© Campanhas_Slogans",
            "Direcao Criativa ¬∑ 07_üé≠ Parcerias_Artisticas",
            "Direcao Criativa ¬∑ 08_üîç Pesquisa_Estudos",

            "Rede Global ¬∑ 01_üá∫üá∏ EUA_CANADA",
            "Rede Global ¬∑ 02_üá™üá∫ EUROPA",
            "Rede Global ¬∑ 03_üåé LATAM",
            "Rede Global ¬∑ 04_ü§ù PARCERIAS_GLOBAIS"
          ];

          const promptMessage =
            "Selecione a categoria da tarefa:\n\n" +
            tagOptions
              .map(function (opt, i) {
                return (i + 1) + ". " + opt;
              })
              .join("\n") +
            "\n\nOu digite uma categoria personalizada.";

          const tagChoice = window.prompt(promptMessage, "1");

          let selectedTag = "";
          if (tagChoice !== null) {
            const tagIndex = parseInt(tagChoice, 10) - 1;
            if (!isNaN(tagIndex) && tagIndex >= 0 && tagIndex < tagOptions.length) {
              selectedTag = tagOptions[tagIndex];
            } else if (tagChoice.trim() !== "") {
              selectedTag = tagChoice.trim();
            }
          }

          const newTask = {
            id: "t_" + Date.now(),
            text: value,
            done: false,
            tag: selectedTag,
            createdAt: new Date().toISOString()
          };
          state.inbox[col.key].push(newTask);
          saveState();
          input.value = "";
          renderInbox();

          createTaskFile(newTask, col.titleShort);
        });

        form.appendChild(input);
        form.appendChild(btn);
        footer.appendChild(form);
        columnEl.appendChild(footer);

        container.appendChild(columnEl);
      });

      updateProgressDashboard();
    }

    const modules = {
      inbox: {
        title: "00 ¬∑ Inbox Operacional",
        subtitle: "Tudo chega aqui primeiro. Depois voc√™ decide: fazer, delegar, agendar ou arquivar.",
        tag: "Entrada de tudo",
        body:
          '<p>Use a Inbox como seu <strong>c√©rebro externo</strong>:</p>' +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">01_‚ö° A_PROCESSAR</span> ‚Äì coisas que chegaram e ainda n√£o foram decididas.</li>' +
          '<li><span class="module-item-label">02_üë• DELEGAR_EQUIPE</span> ‚Äì tarefas que outra pessoa pode executar.</li>' +
          '<li><span class="module-item-label">03_üí° INSPIRACOES_RAPIDAS</span> ‚Äì ideias, rabiscos, flashes criativos.</li>' +
          '<li><span class="module-item-label">04_üåê REFERENCIAS_EXTERNAS</span> ‚Äì prints, links, PDFs que valem ser guardados.</li>' +
          "</ul>" +
          '<p class="module-hint">' +
          "Na pr√°tica: viu algo? joga na Inbox. Em outro momento, voc√™ abre o painel e decide " +
          "para qual n√∫cleo mandar (Artista, Empresa, Agenda, etc.)." +
          "</p>" +
          '<div class="module-links">' +
          '<a href="https://web.whatsapp.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üí¨</span><span>WhatsApp Web</span>' +
          "</a>" +
          '<a href="https://calendar.google.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìÖ</span><span>Google Agenda</span>' +
          "</a>" +
          '<a href="https://web.agendor.com.br/entrar/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìä</span><span>Agendor</span>' +
          "</a>" +
          '<a href="https://docs.google.com/spreadsheets/d/1iwtQoSlaRhUW115wmPv-7qYuslF4J5jcg41RzrgX7e4/edit" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìà</span><span>Planilha Financeira</span>' +
          "</a>" +
          '<a href="https://getmozart.ai/app" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">ü§ñ</span><span>Mozart AI</span>' +
          "</a>" +
          '<a href="https://mail.zoho.com/zm/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìß</span><span>Zoho Mail</span>' +
          "</a>" +
          '<a href="https://www.notion.so/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìì</span><span>Notion</span>' +
          "</a>" +
          '<a href="https://www.youtube.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üé¨</span><span>YouTube</span>' +
          "</a>" +
          "</div>"
      },

      artista: {
        title: "01 ¬∑ Artista Rog√©rio Ferdynan",
        subtitle: "Tudo que sustenta a imagem, repert√≥rio e material art√≠stico do palco.",
        tag: "N√∫cleo art√≠stico",
        body:
          "<p>Espelha a pasta <strong>01_üé§ ARTISTA_ROGERIO_FERDYNAN</strong> do seu sistema:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üì∏ Fotos_Profissionais</span> ‚Äì est√∫dio, ao vivo, bastidores, com f√£s.</li>' +
          '<li><span class="module-item-label">üé• Videos_de_Show</span> ‚Äì RAW, edi√ß√£o, final, VS_Show, backups.</li>' +
          '<li><span class="module-item-label">üéµ Repertorio</span> ‚Äì setlists, letras, blocos tem√°ticos, ensaios.</li>' +
          '<li><span class="module-item-label">üñºÔ∏è Divulgacao_Capas_Stories</span> ‚Äì feed, stories, capas, thumbnails.</li>' +
          "</ul>" +
          '<p class="module-hint">' +
          "Quando uma tarefa √© sobre <strong>imagem, repert√≥rio ou material art√≠stico</strong>, " +
          "ela nasce na Inbox, mas o arquivo final vive neste n√∫cleo." +
          "</p>" +
          '<div class="module-links">' +
          '<a href="https://artists.spotify.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üéß</span><span>Spotify for Artists</span>' +
          "</a>" +
          '<a href="https://artists.bandsintown.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìç</span><span>Bandsintown</span>' +
          "</a>" +
          '<a href="https://linkr.bio/rogerioferdynan" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üåê</span><span>Linkr.bio</span>' +
          "</a>" +
          "</div>"
      },

      empresa: {
        title: "02 ¬∑ Empresa CNPJ ¬∑ Ferdynan Produ√ß√µes",
        subtitle: "Ferramentas para lidar com prefeitura, contratos, NF, bancos, editais.",
        tag: "Backstage da empresa",
        body:
          "<p>Espelha a pasta <strong>02_üíº EMPRESA_CNPJ_FERDYNAN_PRODUCOES</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üìÑ Propostas_Contratos</span></li>' +
          '<li><span class="module-item-label">üí∞ Notas_Fiscais_Pagamentos</span> ‚Äì notas, relat√≥rios, contas banc√°rias.</li>' +
          '<li><span class="module-item-label">üßæ CNPJ_Documentos_Oficiais</span> ‚Äì Receita Federal, certid√µes, calend√°rio fiscal.</li>' +
          '<li><span class="module-item-label">üèôÔ∏è Clientes_Prefeituras</span> ‚Äì DDD37, outras cidades MG, Brasil, internacional.</li>' +
          '<li><span class="module-item-label">üìä Tabelas_Precos_Planilhas</span> ‚Äì business plan, planilhas de venda.</li>' +
          "</ul>" +
          '<p class="module-hint">' +
          "Qualquer tarefa que envolve <strong>dinheiro, documento oficial ou prefeituras</strong> " +
          "provavelmente pertence aqui." +
          "</p>" +
          '<div class="module-links">' +
          '<a href="https://docs.google.com/document/d/1UWcL2O1QFVktAEf3T7p6tkLUzY2HRiNbmHDUpDPr1xA/edit" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìÑ</span><span>Contratos (Docs)</span>' +
          "</a>" +
          '<a href="https://docs.google.com/spreadsheets/d/1iwtQoSlaRhUW115wmPv-7qYuslF4J5jcg41RzrgX7e4/edit" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìä</span><span>Financeiro (Sheets)</span>' +
          "</a>" +
          "</div>"
      },

      pessoal: {
        title: "03 ¬∑ Pessoal ¬∑ CPF Rog√©rio Geraldo Lopes",
        subtitle: "Sa√∫de, documentos, fam√≠lia, processos, organiza√ß√£o pessoal.",
        tag: "Voc√™ como pessoa",
        body:
          "<p>Espelha a pasta <strong>03_üë®‚Äçüë¶ PESSOAL_CPF_ROGERIO_GERALDO_LOPES</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üìú Comprovantes_Declaracoes</span></li>' +
          '<li><span class="module-item-label">üíä Saude_Mental_Suplementacao</span></li>' +
          '<li><span class="module-item-label">üë¶ Filho_Mikael</span></li>' +
          "</ul>"
      },

      direcao: {
        title: "04 ¬∑ Dire√ß√£o Criativa & Conte√∫do",
        subtitle: "M√∫sicas, campanhas, reels, est√©tica, parcerias art√≠sticas.",
        tag: "C√©rebro criativo",
        body:
          "<p>Espelha a pasta <strong>04_üß† DIRECAO_CRIATIVA_CONTEUDO</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üì¢ Posts_Prontos</span></li>' +
          '<li><span class="module-item-label">üé¨ Modelos_Reels</span></li>' +
          '<li><span class="module-item-label">üéß Musicas_Em_Andamento</span></li>' +
          "</ul>" +
          '<p class="module-hint">' +
          "Quando a tarefa √© <strong>criar, refinar ou pensar conceito</strong>, " +
          "ela provavelmente termina aqui." +
          "</p>" +
          '<div class="module-links">' +
          '<a href="https://www.canva.com/pt_br/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üé®</span><span>Canva</span>' +
          "</a>" +
          '<a href="https://commercepro.capcut.com/ai-video-generator-v2/result" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üé¨</span><span>CapCut</span>' +
          "</a>" +
          '<a href="https://chatgpt.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">ü§ñ</span><span>ChatGPT</span>' +
          "</a>" +
          '<a href="https://gemini.google.com/app" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üß†</span><span>Gemini</span>' +
          "</a>" +
          "</div>"
      },

      agenda: {
        title: "05 ¬∑ Agenda & Log√≠stica",
        subtitle: "Shows confirmados, em negocia√ß√£o, deslocamentos, equipe, equipamentos.",
        tag: "Opera√ß√£o de palco",
        body:
          "<p>Espelha a pasta <strong>05_üìÖ AGENDA_LOGISTICA</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üéüÔ∏è Shows_Confirmados</span></li>' +
          '<li><span class="module-item-label">üí¨ Shows_Negociacao</span></li>' +
          "</ul>" +
          '<div class="module-links">' +
          '<a href="https://trello.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìå</span><span>Trello</span>' +
          "</a>" +
          '<a href="https://web.whatsapp.com/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üí¨</span><span>WhatsApp Web</span>' +
          "</a>" +
          "</div>"
      },

      backup: {
        title: "06 ¬∑ Backup / Arquivo Morto",
        subtitle: "Tudo que n√£o √© mais da rotina, mas voc√™ n√£o quer perder de vista.",
        tag: "Mem√≥ria do sistema",
        body:
          "<p>Espelha a pasta <strong>06_üîí BACKUP_ARQUIVO_MORTO</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üï∞Ô∏è Fotos_Antigas</span></li>' +
          '<li><span class="module-item-label">üóûÔ∏è Campanhas_Encerradas_LogOff</span></li>' +
          '<li><span class="module-item-label">üóÉÔ∏è Pastas_Antigas</span></li>' +
          '<li><span class="module-item-label">üì± Prints_WhatsApp</span></li>' +
          "</ul>"
      },

      venda: {
        title: "07 ¬∑ Venda Mensal ¬∑ Miss√£o",
        subtitle: "Tudo que coloca show novo na agenda e dinheiro entrando.",
        tag: "Motor comercial",
        body:
          "<p>Espelha a pasta <strong>07_üí• VENDA_MENSAL_MISSAO</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üì∞ Cartazes_Atualizados</span></li>' +
          '<li><span class="module-item-label">üìò Portfolio_PDF</span></li>' +
          '<li><span class="module-item-label">üí¨ Texto_WhatsApp_Venda</span></li>' +
          "</ul>" +
          '<div class="module-links">' +
          '<a href="https://b2bleads.com.br/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üìá</span><span>B2B Leads</span>' +
          "</a>" +
          '<a href="https://calculadora-freelae.web.app/" target="_blank" rel="noopener noreferrer" class="link-chip">' +
          '<span class="emoji">üßÆ</span><span>Calculadora Freelancer</span>' +
          "</a>" +
          "</div>"
      },

      centro: {
        title: "08 ¬∑ Centro de Controle & Conex√µes",
        subtitle: "Mapas, fluxos, integra√ß√µes, modelos que conectam tudo.",
        tag: "Arquitetura do sistema",
        body:
          "<p>Espelha a pasta <strong>08_üß© CENTRO_CONTROLE_CONEXOES</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üó∫Ô∏è Mapa_Geral_Pastas</span></li>' +
          '<li><span class="module-item-label">üßæ Fluxos_Checklists</span></li>' +
          '<li><span class="module-item-label">üîó Integracoes_Estrategicas</span></li>' +
          "</ul>"
      },

      rede: {
        title: "09 ¬∑ Rede Global",
        subtitle: "Conex√µes com EUA, Europa, Latam, parcerias globais.",
        tag: "Expans√£o",
        body:
          "<p>Espelha a pasta <strong>09_üåé REDE_GLOBAL</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üá∫üá∏ EUA_CANADA</span></li>' +
          '<li><span class="module-item-label">üá™üá∫ EUROPA</span></li>' +
          '<li><span class="module-item-label">üåé LATAM</span></li>' +
          "</ul>"
      },

      modelos: {
        title: "10 ¬∑ Modelos Oficiais",
        subtitle: "Apresenta√ß√µes, docs, planilhas, identidade visual.",
        tag: "Base oficial",
        body:
          "<p>Espelha a pasta <strong>10_üßæ MODELOS_OFICIAIS</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üß† Apresentacoes</span></li>' +
          '<li><span class="module-item-label">üìÑ Docs</span></li>' +
          '<li><span class="module-item-label">üñºÔ∏è Identidade_Visual</span></li>' +
          '<li><span class="module-item-label">üìä Planilhas</span></li>' +
          "</ul>"
      },

      admin: {
        title: "11 ¬∑ Admin do Sistema",
        subtitle: "Atalhos, scripts, regras de backup e deduplica√ß√£o.",
        tag: "Bastidor t√©cnico",
        body:
          "<p>Espelha a pasta <strong>11_üß∞ ADMIN_SISTEMA</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üîó _ATALHOS</span></li>' +
          '<li><span class="module-item-label">‚öôÔ∏è Administra√ß√£o, scripts e atalhos internos</span></li>' +
          "</ul>"
      },

      resultados: {
        title: "12 ¬∑ Resultados Finais",
        subtitle: "Clientes, imprensa, social ‚Äì o que sai para o mundo.",
        tag: "Sa√≠da final",
        body:
          "<p>Espelha a pasta <strong>12_üéØ RESULTADOS_FINAIS</strong>:</p>" +
          '<ul class="module-list">' +
          '<li><span class="module-item-label">üíº Clientes</span></li>' +
          '<li><span class="module-item-label">üì∞ Imprensa</span></li>' +
          '<li><span class="module-item-label">üì± Social</span></li>' +
          "</ul>"
      }
    };

    function renderModule(moduleKey) {
      const module = modules[moduleKey] || modules.inbox;
      const titleEl = document.getElementById("module-title");
      const subtitleEl = document.getElementById("module-subtitle");
      const tagEl = document.getElementById("module-tag");
      const bodyEl = document.getElementById("module-body");

      if (titleEl) titleEl.textContent = module.title;
      if (subtitleEl) subtitleEl.textContent = module.subtitle;
      if (tagEl) tagEl.textContent = module.tag;
      if (bodyEl) bodyEl.innerHTML = module.body;

      currentModule = moduleKey;
    }

    function setupSidebar() {
      const list = document.getElementById("nav-list");
      if (!list) return;
      const items = list.querySelectorAll(".nav-item");

      items.forEach(function (item) {
        function activate() {
          items.forEach(function (i) {
            i.classList.remove("active");
            i.removeAttribute("aria-current");
          });
          item.classList.add("active");
          item.setAttribute("aria-current", "page");
          const key = item.getAttribute("data-module");
          if (key) renderModule(key);
        }

        item.addEventListener("click", activate);
        item.addEventListener("keydown", function (e) {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            activate();
          }
        });
      });
    }

    function copyFolderPath() {
      const folderPath = folderMap[currentModule];
      if (!folderPath) {
        window.alert("Caminho da pasta n√£o encontrado para este m√≥dulo.");
        return;
      }

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(folderPath)
          .then(function () {
            window.alert(
              "‚úÖ Caminho copiado para a √°rea de transfer√™ncia!\n\n" +
              folderPath +
              "\n\nAgora abra o Explorador de Arquivos (Win + E) e cole na barra de endere√ßo."
            );
          })
          .catch(function () {
            fallbackCopyTextToClipboard(folderPath);
          });
      } else {
        fallbackCopyTextToClipboard(folderPath);
      }
    }

    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      try {
        document.execCommand("copy");
        window.alert(
          "‚úÖ Caminho copiado para a √°rea de transfer√™ncia!\n\n" +
          text +
          "\n\nAgora abra o Explorador de Arquivos (Win + E) e cole na barra de endere√ßo."
        );
      } catch (err) {
        window.alert(
          "Caminho da pasta:\n\n" +
          text +
          "\n\nCopie e cole manualmente no Explorador de Arquivos."
        );
      }
      document.body.removeChild(textArea);
    }

    function exportTasks() {
      let allTasks = [];

      columnsConfig.forEach(function (col) {
        const tasks = state.inbox[col.key] || [];
        tasks.forEach(function (task) {
          allTasks.push({
            text: task.text,
            done: task.done,
            tag: task.tag,
            priority: col.title
          });
        });
      });

      if (allTasks.length === 0) {
        window.alert("Nenhuma tarefa encontrada para este m√≥dulo.");
        return;
      }

      const now = new Date();
      const dateStr = now.toLocaleDateString("pt-BR");
      const timeStr = now.toLocaleTimeString("pt-BR");

      let fileContent = "TAREFAS - " + modules[currentModule].title + "\n";
      fileContent += "Exportado em: " + dateStr + " √†s " + timeStr + "\n";
      fileContent += Array(51).join("=") + "\n\n";

      allTasks.forEach(function (task, index) {
        const status = task.done ? "[‚úì] CONCLU√çDO" : "[ ] PENDENTE";
        fileContent += (index + 1) + ". " + status + " - " + task.text + "\n";
        fileContent += "   Prioridade: " + task.priority + "\n";
        if (task.tag) {
          fileContent += "   Tag: " + task.tag + "\n";
        }
        fileContent += "\n";
      });

      const blob = new Blob([fileContent], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download =
        "Tarefas_" +
        modules[currentModule].title.replace(/[^a-zA-Z0-9]/g, "_") +
        "_" +
        dateStr.replace(/\//g, "-") +
        ".txt";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      window.alert("‚úÖ Arquivo de tarefas exportado para sua pasta de downloads.\n\nNome: " + a.download);
    }

    function exportDailyReport() {
      const today = new Date().toISOString().split("T")[0];
      let completedToday = [];

      Object.values(state.inbox).forEach(function (column) {
        column.forEach(function (task) {
          if (task.done && task.completedAt && task.completedAt.startsWith(today)) {
            completedToday.push(task);
          }
        });
      });

      if (completedToday.length === 0) {
        window.alert("Nenhuma tarefa conclu√≠da hoje para exportar.");
        return;
      }

      const now = new Date();
      const dateStr = now.toLocaleDateString("pt-BR");
      const timeStr = now.toLocaleTimeString("pt-BR");

      let fileContent = "ATA DE ATIVIDADES DI√ÅRIAS - PAINEL FERDYNAN\n";
      fileContent += "Data: " + dateStr + " | Hora: " + timeStr + "\n";
      fileContent += Array(61).join("=") + "\n\n";
      fileContent += "TAREFAS CONCLU√çDAS HOJE:\n\n";

      completedToday.forEach(function (task, index) {
        const completedTime = new Date(task.completedAt).toLocaleTimeString("pt-BR");
        fileContent += (index + 1) + ". [" + completedTime + "] " + task.text + "\n";
        if (task.tag) {
          fileContent += "   üìÅ " + task.tag + "\n";
        }
        fileContent += "\n";
      });

      fileContent += Array(61).join("=") + "\n";
      fileContent += "Total de tarefas conclu√≠das: " + completedToday.length + "\n";
      const prod = Math.round(
        (completedToday.length /
          (completedToday.length + getPendingTasksCount())) *
          100
      );
      fileContent +=
        "Taxa de produtividade (no painel): " + (isNaN(prod) ? 0 : prod) + "%\n";

      const blob = new Blob([fileContent], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "ATA_DIARIA_" + dateStr.replace(/\//g, "-") + ".txt";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showNotification("‚úÖ ATA di√°ria exportada com " + completedToday.length + " tarefas!");
    }

    function createTaskFile(task, priorityShort) {
      if (!task.tag) return;

      const now = new Date();
      const dateStr = now.toLocaleDateString("pt-BR");
      const timeStr = now.toLocaleTimeString("pt-BR");

      let fileContent = "TAREFA: " + task.text + "\n";
      fileContent += "Criada em: " + dateStr + " √†s " + timeStr + "\n";
      fileContent += "Prioridade: " + priorityShort + "\n";
      fileContent += "Categoria: " + task.tag + "\n";
      fileContent += "Status: " + (task.done ? "CONCLU√çDO" : "PENDENTE") + "\n";
      fileContent += Array(51).join("=") + "\n\n";
      fileContent += "DESCRI√á√ÉO:\n";
      fileContent += "Adicione aqui os detalhes da tarefa...\n\n";
      fileContent += "A√á√ïES NECESS√ÅRIAS:\n";
      fileContent += "- [ ] Definir prazo\n";
      fileContent += "- [ ] Alocar recursos\n";
      fileContent += "- [ ] Designar respons√°vel\n\n";
      fileContent += "NOTAS:\n";
      fileContent += "‚Ä¢ \n";

      const blob = new Blob([fileContent], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;

      const fileName =
        "Tarefa_" +
        task.text.substring(0, 30).replace(/[^a-zA-Z0-9]/g, "_") +
        "_" +
        Date.now() +
        ".txt";
      a.download = fileName;

      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showNotification("‚úÖ Arquivo criado: " + fileName);
    }

    function showNotification(message) {
      const notification = document.createElement("div");
      notification.className = "notification";
      notification.setAttribute("role", "status");
      notification.setAttribute("aria-live", "polite");
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(function () {
        notification.remove();
      }, 3000);
    }

    /* META FINANCEIRA */
    function updateFinanceWidget() {
      const META_LIQUIDA = 10000;
      const NET_SMALL = 200;   // 500 - 300
      const NET_BIG = 2000;    // 5000 - 3000
      const GROSS_SMALL = 500;
      const COST_SMALL = 300;
      const GROSS_BIG = 5000;
      const COST_BIG = 3000;

      const inputSmall = document.getElementById("shows-pequenos");
      const inputBig = document.getElementById("shows-grandes");

      if (!inputSmall || !inputBig) return;

      const qSmall = Math.max(0, parseInt(inputSmall.value, 10) || 0);
      const qBig = Math.max(0, parseInt(inputBig.value, 10) || 0);

      const bruto = qSmall * GROSS_SMALL + qBig * GROSS_BIG;
      const custos = qSmall * COST_SMALL + qBig * COST_BIG;
      const liquido = bruto - custos;

      const pct = META_LIQUIDA > 0 ? Math.min(120, (liquido / META_LIQUIDA) * 100) : 0;

      const faltam = liquido >= META_LIQUIDA
        ? 0
        : Math.ceil((META_LIQUIDA - liquido) / NET_SMALL);

      const brutoEl = document.getElementById("finance-bruto");
      const custosEl = document.getElementById("finance-custos");
      const liquidoEl = document.getElementById("finance-liquido");
      const faltamEl = document.getElementById("finance-faltam-shows");
      const barFill = document.getElementById("finance-bar-fill");
      const barLabel = document.getElementById("finance-bar-label");
      const statusEl = document.getElementById("finance-status");

      function formatBRL(v) {
        return "R$ " + v.toLocaleString("pt-BR");
      }

      if (brutoEl) brutoEl.textContent = formatBRL(bruto);
      if (custosEl) custosEl.textContent = formatBRL(custos);
      if (liquidoEl) liquidoEl.textContent = formatBRL(Math.max(liquido, 0));
      if (faltamEl) faltamEl.textContent = String(Math.max(faltam, 0));
      if (barFill) barFill.style.width = Math.max(0, pct) + "%";
      if (barLabel) {
        const safePct = META_LIQUIDA > 0 ? Math.max(0, Math.min(100, Math.round((liquido / META_LIQUIDA) * 100))) : 0;
        barLabel.textContent = safePct + "% da meta alcan√ßada";
      }

      if (statusEl) {
        statusEl.classList.remove("finance-status--ok", "finance-status--pending", "finance-status--zero");

        if (liquido <= 0 && qSmall === 0 && qBig === 0) {
          statusEl.classList.add("finance-status--zero");
          statusEl.innerHTML = 'Situa√ß√£o: <span>meta ainda n√£o iniciada.</span>';
        } else if (liquido >= META_LIQUIDA) {
          statusEl.classList.add("finance-status--ok");
          statusEl.innerHTML = 'Situa√ß√£o: <span>meta batida! Voc√™ j√° tem ' +
            formatBRL(liquido) +
            ' livres.</span>';
        } else {
          statusEl.classList.add("finance-status--pending");
          statusEl.innerHTML =
            'Situa√ß√£o: <span>faltam ' +
            formatBRL(Math.max(META_LIQUIDA - liquido, 0)) +
            ' de lucro l√≠quido</span> ‚Äî equivalente a ' +
            Math.max(faltam, 0) +
            ' shows padr√£o (R$ 500) se n√£o vender mais premium.';
        }
      }
    }

    function setupFinanceWidget() {
      const inputSmall = document.getElementById("shows-pequenos");
      const inputBig = document.getElementById("shows-grandes");
      if (!inputSmall || !inputBig) return;

      ["input", "change"].forEach(function (ev) {
        inputSmall.addEventListener(ev, updateFinanceWidget);
        inputBig.addEventListener(ev, updateFinanceWidget);
      });

      updateFinanceWidget();
    }

    function init() {
      renderStats();
      setupStatsEditing();
      renderInbox();
      setupSidebar();
      renderModule("inbox");
      updateProgressDashboard();
      setupFinanceWidget();

      const copyBtn = document.getElementById("copy-folder-btn");
      const exportTasksBtn = document.getElementById("export-tasks-btn");
      const exportDailyBtn = document.getElementById("export-daily-btn");

      if (copyBtn) copyBtn.addEventListener("click", copyFolderPath);
      if (exportTasksBtn) exportTasksBtn.addEventListener("click", exportTasks);
      if (exportDailyBtn) exportDailyBtn.addEventListener("click", exportDailyReport);
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
