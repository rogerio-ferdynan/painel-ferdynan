<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Ferdynan - Sistema de GestÃ£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050816;
      --bg-elevated: #0b1020;
      --accent: #f97316;
      --accent-soft: rgba(249, 115, 22, 0.1);
      --text: #f9fafb;
      --muted: #9ca3af;
      --border: #1f2937;
      --radius-lg: 18px;
      --radius-xl: 22px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.45);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #111827, #020617 60%);
      color: var(--text);
    }

    .app {
      display: flex;
      min-height: 100vh;
    }

    /* SIDEBAR */
    .sidebar {
      width: 280px;
      padding: 20px 18px;
      border-right: 1px solid var(--border);
      background: radial-gradient(circle at top left, #111827, #020617 60%);
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-avatar {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: linear-gradient(135deg, #f97316, #fb923c);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      color: #111827;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3);
    }

    .brand-text-title {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }

    .brand-text-name {
      font-size: 16px;
      font-weight: 600;
    }

    .sidebar-section-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-top: 10px;
      margin-bottom: 5px;
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      border-radius: 999px;
      padding: 8px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s ease;
    }

    .nav-item span.emoji {
      font-size: 18px;
    }

    .nav-item.active {
      background: linear-gradient(135deg, #f97316, #fb923c);
      color: #111827;
      border-color: rgba(249, 115, 22, 0.3);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
    }

    .nav-item:not(.active):hover {
      background: rgba(15, 23, 42, 0.8);
      border-color: var(--border);
      color: #e5e7eb;
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--muted);
      border-top: 1px dashed var(--border);
      padding-top: 10px;
    }

    /* MAIN */
    .main {
      flex: 1;
      padding: 22px 28px 28px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .main-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .title-block h1 {
      font-size: 22px;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-block p {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(249, 115, 22, 0.4);
    }

    .stats-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .stat-card {
      min-width: 130px;
      padding: 10px 12px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, #111827, #020617 60%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .stat-card:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .stat-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 18px;
      font-weight: 600;
    }

    .stat-hint {
      font-size: 10px;
      color: var(--muted);
      margin-top: 2px;
    }

    /* Barra de progresso das stats */
    .stat-progress {
      height: 4px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 6px;
    }

    .stat-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #f97316, #fb923c);
      width: 60%;
      transition: width 0.4s ease;
    }

    /* DASHBOARD DE PROGRESSO DO DIA */
    .progress-dashboard {
      background: rgba(15, 23, 42, 0.96);
      border-radius: var(--radius-xl);
      padding: 14px 16px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .progress-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .progress-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
    }

    .progress-item {
      text-align: left;
    }

    .progress-number {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 2px;
    }

    .progress-label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    /* CONTENT (2 painÃ©is lado a lado) */
    .content {
      display: grid;
      grid-template-columns: minmax(0, 2.4fr) minmax(0, 1.4fr);
      gap: 16px;
      align-items: flex-start;
    }

    .panel {
      background: rgba(15, 23, 42, 0.96);
      border-radius: var(--radius-xl);
      padding: 16px 16px 14px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      position: relative;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .panel-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
    }

    .panel-subtitle {
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      white-space: nowrap;
    }

    /* INBOX COLUMNS â€“ HORIZONTAL / RESPONSIVO */
    .columns {
      display: flex;
      gap: 10px;
      align-items: stretch;
      overflow-x: auto;
      padding-bottom: 4px;
      scroll-snap-type: x mandatory;
    }

    .columns::-webkit-scrollbar {
      height: 6px;
    }

    .columns::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.7);
      border-radius: 999px;
    }

    .columns::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 999px;
    }

    .column {
      background: radial-gradient(circle at top left, #020617, #020617 65%);
      border-radius: 16px;
      padding: 10px 10px 8px;
      border: 1px solid var(--border);
      min-width: 240px;
      flex: 0 0 260px;
      scroll-snap-align: start;
      display: flex;
      flex-direction: column;
    }

    .column-header {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .column-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .column-tag {
      font-size: 10px;
      color: var(--muted);
    }

    .task-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: 210px;
      overflow-y: auto;
    }

    .task {
      display: flex;
      align-items: flex-start;
      gap: 6px;
      font-size: 12px;
      padding: 5px 6px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .task:hover {
      background: rgba(15, 23, 42, 0.5);
    }

    .task input[type="checkbox"] {
      margin-top: 2px;
      cursor: pointer;
    }

    .task-text {
      flex: 1;
    }

    .task.done {
      opacity: 0.6;
    }

    .task.done .task-text {
      text-decoration: line-through;
    }

    .task-tag {
      font-size: 10px;
      color: var(--muted);
      margin-top: 2px;
    }

    .task-actions {
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .task:hover .task-actions {
      opacity: 1;
    }

    .task-action-btn {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      padding: 2px;
      border-radius: 4px;
    }

    .task-action-btn:hover {
      background: rgba(15, 23, 42, 0.9);
      color: var(--accent);
    }

    .task-footer {
      margin-top: 4px;
      border-top: 1px dashed var(--border);
      padding-top: 4px;
    }

    .task-form {
      display: flex;
      gap: 4px;
      margin-top: 4px;
    }

    .task-input {
      flex: 1;
      font-size: 11px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
    }

    .task-input:focus {
      outline: 1px solid var(--accent);
      border-color: var(--accent);
    }

    .task-add-btn {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #111827;
      cursor: pointer;
      font-weight: 600;
    }

    .task-add-btn:hover {
      filter: brightness(1.05);
    }

    /* SIDE PANEL */
    .module-body {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .module-list {
      list-style: none;
      padding-left: 0;
      margin: 6px 0 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .module-item-label {
      font-weight: 500;
      color: #e5e7eb;
    }

    .module-hint {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .muted {
      color: var(--muted);
      font-size: 11px;
    }

    .hint-click {
      font-size: 11px;
      color: var(--muted);
      margin-top: 6px;
    }

    .module-actions {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .folder-action {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      border-radius: 6px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(249, 115, 22, 0.4);
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 4px;
    }

    .folder-action:hover {
      background: var(--accent);
      color: #111827;
    }

    /* LINKS DOS MÃ“DULOS */
    .module-links {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .link-chip {
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid var(--border);
      font-size: 11px;
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .link-chip span.emoji {
      font-size: 14px;
    }

    .link-chip:hover {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
    }

    /* EXPORT SECTION (ATA DIÃRIA) */
    .export-section {
      margin-top: 12px;
      padding: 10px 12px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 12px;
      border: 1px dashed var(--border);
    }

    .export-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .export-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .export-btn {
      background: linear-gradient(135deg, #10b981, #059669);
      color: #f9fafb;
      border: none;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
    }

    .export-btn:hover {
      filter: brightness(1.05);
    }

    /* NOTIFICAÃ‡ÃƒO */
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--accent);
      color: #111827;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* RESPONSIVO */
    @media (max-width: 900px) {
      .app {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }
      .content {
        grid-template-columns: 1fr;
      }
      .main {
        padding: 16px;
      }
    }

    @media (max-width: 600px) {
      .stats-row {
        width: 100%;
      }
      .panel {
        padding: 14px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- LATERAL -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-avatar">RF</div>
        <div>
          <div class="brand-text-title">Painel de comando</div>
          <div class="brand-text-name">Ferdynan Legacy System</div>
        </div>
      </div>

      <div>
        <div class="sidebar-section-title">NÃºcleos principais</div>
        <ul class="nav-list" id="nav-list">
          <li class="nav-item active" data-module="inbox">
            <span class="emoji">ğŸ“¨</span>
            <span>00 Â· Inbox Operacional</span>
          </li>
          <li class="nav-item" data-module="artista">
            <span class="emoji">ğŸ¤</span>
            <span>01 Â· Artista RogÃ©rio Ferdynan</span>
          </li>
          <li class="nav-item" data-module="empresa">
            <span class="emoji">ğŸ’¼</span>
            <span>02 Â· Empresa CNPJ</span>
          </li>
          <li class="nav-item" data-module="pessoal">
            <span class="emoji">ğŸ‘¨â€ğŸ‘¦</span>
            <span>03 Â· Pessoal CPF</span>
          </li>
          <li class="nav-item" data-module="direcao">
            <span class="emoji">ğŸ§ </span>
            <span>04 Â· DireÃ§Ã£o Criativa</span>
          </li>
          <li class="nav-item" data-module="agenda">
            <span class="emoji">ğŸ“…</span>
            <span>05 Â· Agenda & LogÃ­stica</span>
          </li>
          <li class="nav-item" data-module="backup">
            <span class="emoji">ğŸ”’</span>
            <span>06 Â· Backup / Arquivo Morto</span>
          </li>
          <li class="nav-item" data-module="venda">
            <span class="emoji">ğŸ’¥</span>
            <span>07 Â· Venda Mensal</span>
          </li>
          <li class="nav-item" data-module="centro">
            <span class="emoji">ğŸ§©</span>
            <span>08 Â· Centro de Controle</span>
          </li>
          <li class="nav-item" data-module="rede">
            <span class="emoji">ğŸŒ</span>
            <span>09 Â· Rede Global</span>
          </li>
          <li class="nav-item" data-module="modelos">
            <span class="emoji">ğŸ§¾</span>
            <span>10 Â· Modelos Oficiais</span>
          </li>
          <li class="nav-item" data-module="admin">
            <span class="emoji">ğŸ§°</span>
            <span>11 Â· Admin do Sistema</span>
          </li>
          <li class="nav-item" data-module="resultados">
            <span class="emoji">ğŸ¯</span>
            <span>12 Â· Resultados Finais</span>
          </li>
        </ul>
      </div>

      <div class="sidebar-footer">
        <div>VersÃ£o 3 Â· CriaÃ§Ã£o automÃ¡tica de arquivos</div>
        <div class="muted">
          As tarefas criadas geram automaticamente arquivos nas pastas correspondentes.
        </div>
      </div>
    </aside>

    <!-- CONTEÃšDO PRINCIPAL -->
    <main class="main">
      <header class="main-header">
        <div class="title-block">
          <h1>
            Painel Ferdynan
            <span class="badge">Sistema de GestÃ£o 2025</span>
          </h1>
          <p>VisÃ£o tÃ¡tica do dia a dia Â· OrquestraÃ§Ã£o de vida, empresa e palco.</p>
        </div>

        <div class="stats-row">
          <div class="stat-card" data-stat="shows">
            <div class="stat-label">Shows no mÃªs</div>
            <div class="stat-value" id="stat-shows">12</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-shows"></div>
            </div>
            <div class="stat-hint">Clique para ajustar</div>
          </div>
          <div class="stat-card" data-stat="faturamento">
            <div class="stat-label">Faturamento</div>
            <div class="stat-value" id="stat-faturamento">R$ 85.000</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-faturamento"></div>
            </div>
            <div class="stat-hint">Clique para ajustar</div>
          </div>
          <div class="stat-card" data-stat="propostas">
            <div class="stat-label">Propostas abertas</div>
            <div class="stat-value" id="stat-propostas">7</div>
            <div class="stat-progress">
              <div class="stat-progress-bar" id="bar-propostas"></div>
            </div>
            <div class="stat-hint">Clique para ajustar</div>
          </div>
        </div>
      </header>

      <!-- PROGRESSO DO DIA -->
      <section class="progress-dashboard">
        <div class="progress-header">
          <div class="progress-title">Progresso do dia</div>
        </div>
        <div class="progress-stats">
          <div class="progress-item">
            <div class="progress-number" id="progress-total">0</div>
            <div class="progress-label">Total de tarefas</div>
          </div>
          <div class="progress-item">
            <div class="progress-number" id="progress-done">0</div>
            <div class="progress-label">ConcluÃ­das</div>
          </div>
          <div class="progress-item">
            <div class="progress-number" id="progress-percentage">0%</div>
            <div class="progress-label">Progresso</div>
          </div>
          <div class="progress-item">
            <div class="progress-number" id="progress-pending">0</div>
            <div class="progress-label">Pendentes</div>
          </div>
        </div>
      </section>

      <section class="content">
        <!-- INBOX OPERACIONAL -->
        <section class="panel">
          <div class="panel-header">
            <div>
              <div class="panel-title">Inbox Â· Caixa de Entrada Operacional</div>
              <div class="panel-subtitle">
                Tudo que chega primeiro cai aqui. Depois vocÃª envia para o nÃºcleo certo.
              </div>
            </div>
            <div class="pill">Foco de hoje</div>
          </div>

          <div class="columns" id="columns">
            <!-- colunas geradas via JS -->
          </div>
        </section>

        <!-- LADO DIREITO: NÃšCLEO SELECIONADO -->
        <aside class="panel">
          <div class="panel-header">
            <div>
              <div class="panel-title" id="module-title">
                00 Â· Inbox Operacional
              </div>
              <div class="panel-subtitle" id="module-subtitle">
                Processar, decidir, delegar. Nada dorme na sua cabeÃ§a: tudo vem pra cÃ¡.
              </div>
            </div>
            <div class="pill" id="module-tag">VisÃ£o rÃ¡pida do nÃºcleo</div>
          </div>

          <div class="module-body" id="module-body">
            <!-- ConteÃºdo do nÃºcleo selecionado via JS -->
          </div>
          
          <div class="module-actions">
            <button class="folder-action" id="copy-folder-btn">
              <span>ğŸ“</span> Copiar caminho da pasta
            </button>
            <button class="folder-action" id="export-tasks-btn">
              <span>ğŸ’¾</span> Exportar tarefas (.txt)
            </button>
          </div>

          <div class="export-section">
            <div class="export-header">
              <div class="export-title">ExportaÃ§Ã£o diÃ¡ria</div>
              <button class="export-btn" id="export-daily-btn">ğŸ“‹ Gerar ATA do dia</button>
            </div>
            <div class="module-hint">
              Gera um relatÃ³rio das tarefas concluÃ­das hoje em formato profissional (.txt).
            </div>
          </div>
        </aside>
      </section>
      <div class="hint-click">
        ğŸ’¡ Dica: use este painel como rotina diÃ¡ria â€” abrir, ver a Inbox, marcar o que foi feito
        e decidir o que vai pra qual nÃºcleo (Artista, Empresa, Agenda, etc.).
      </div>
    </main>
  </div>

  <script>
    // -------------------------
    // ESTADO INICIAL
    // -------------------------
    const STORAGE_KEY = "painelFerdynan_v3";

    const defaultState = {
      stats: {
        shows: 12,
        faturamento: "R$ 85.000",
        propostas: 7,
      },
      inbox: {
        aProcessar: [
          {
            id: "t1",
            text: "Revisar proposta Prefeitura de BH",
            done: false,
            tag: "Empresa Â· Propostas_Contratos",
            createdAt: new Date().toISOString()
          },
        ],
        alta: [
          {
            id: "t2",
            text: "Enviar material para rÃ¡dio",
            done: false,
            tag: "Artista Â· Midia_Jornal_TV_Radio",
            createdAt: new Date().toISOString()
          },
        ],
        media: [
          {
            id: "t3",
            text: "Agendar ensaio fotogrÃ¡fico",
            done: false,
            tag: "Artista Â· Fotos_Profissionais",
            createdAt: new Date().toISOString()
          },
        ],
        delegar: [
          {
            id: "t4",
            text: "Editar vÃ­deo do show em SP",
            done: false,
            tag: "DireÃ§Ã£o Criativa Â· VÃ­deos_de_Show",
            createdAt: new Date().toISOString()
          },
          {
            id: "t5",
            text: "Atualizar planilha financeira",
            done: false,
            tag: "Empresa Â· Tabelas_Precos_Planilhas",
            createdAt: new Date().toISOString()
          },
          {
            id: "t6",
            text: "Enviar NF para contabilidade",
            done: false,
            tag: "Empresa Â· Notas_Fiscais_Pagamentos",
            createdAt: new Date().toISOString()
          },
        ],
      },
    };

    let state = loadState();
    let currentModule = "inbox";

    // -------------------------
    // MAPA DE PASTAS
    // -------------------------
    const folderMap = {
      inbox: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\00_ğŸ“¨ INBOX â€“ CAIXA DE ENTRADA OPERACIONAL",
      artista: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\01_ğŸ¤ ARTISTA_ROGERIO_FERDYNAN",
      empresa: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\02_ğŸ’¼ EMPRESA_CNPJ_FERDYNAN_PRODUCOES",
      pessoal: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\03_ğŸ‘¨â€ğŸ‘¦ PESSOAL_CPF_ROGERIO_GERALDO_LOPES",
      direcao: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\04_ğŸ§  DIRECAO_CRIATIVA_CONTEUDO",
      agenda: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\05_ğŸ“… AGENDA_LOGISTICA",
      backup: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\06_ğŸ”’ BACKUP_ARQUIVO_MORTO",
      venda: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\07_ğŸ’¥ VENDA_MENSAL_MISSAO",
      centro: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\08_ğŸ§© CENTRO_CONTROLE_CONEXOES",
      rede: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\09_ğŸŒ REDE_GLOBAL",
      modelos: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\10_ğŸ§¾ MODELOS_OFICIAIS",
      admin: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\11_ğŸ§° ADMIN_SISTEMA",
      resultados: "D:\\\\FERDYNAN_LEGACY_SYSTEM_2025\\\\12_ğŸ¯ RESULTADOS_FINAIS"
    };

    // -------------------------
    // CARREGA / SALVA
    // -------------------------
    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return structuredClone(defaultState);
        const parsed = JSON.parse(raw);
        return { ...structuredClone(defaultState), ...parsed };
      } catch (e) {
        console.error("Erro carregando estado, usando padrÃ£o", e);
        return structuredClone(defaultState);
      }
    }

    function saveState() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        updateProgressDashboard();
      } catch (e) {
        console.error("Erro salvando estado", e);
      }
    }

    // -------------------------
    // DASHBOARD DE PROGRESSO
    // -------------------------
    function updateProgressDashboard() {
      let totalTasks = 0;
      let doneTasks = 0;

      Object.values(state.inbox).forEach(col => {
        col.forEach(task => {
          totalTasks++;
          if (task.done) doneTasks++;
        });
      });

      const percentage = totalTasks > 0 ? Math.round((doneTasks / totalTasks) * 100) : 0;
      const pending = totalTasks - doneTasks;

      document.getElementById("progress-total").textContent = totalTasks;
      document.getElementById("progress-done").textContent = doneTasks;
      document.getElementById("progress-percentage").textContent = percentage + "%";
      document.getElementById("progress-pending").textContent = pending;
    }

    function getPendingTasksCount() {
      let pending = 0;
      Object.values(state.inbox).forEach(col => {
        col.forEach(task => {
          if (!task.done) pending++;
        });
      });
      return pending;
    }

    // -------------------------
    // RENDER STATS
    // -------------------------
    function renderStats() {
      document.getElementById("stat-shows").textContent = state.stats.shows;
      document.getElementById("stat-faturamento").textContent = state.stats.faturamento;
      document.getElementById("stat-propostas").textContent = state.stats.propostas;

      // barras de progresso simples (mock)
      document.getElementById("bar-shows").style.width = "80%";
      document.getElementById("bar-faturamento").style.width = "65%";
      document.getElementById("bar-propostas").style.width = "45%";
    }

    function setupStatsEditing() {
      document.querySelectorAll(".stat-card").forEach((card) => {
        card.addEventListener("click", () => {
          const type = card.dataset.stat;
          let current = state.stats[type];
          const label = {
            shows: "Quantos shows no mÃªs?",
            faturamento: "Qual o faturamento (ex.: R$ 85.000)?",
            propostas: "Quantas propostas abertas?",
          }[type];

          const value = window.prompt(label, current);
          if (value === null || value === "") return;

          if (type === "shows" || type === "propostas") {
            const num = parseInt(value, 10);
            if (!isNaN(num)) {
              state.stats[type] = num;
            } else {
              state.stats[type] = value;
            }
          } else {
            state.stats[type] = value;
          }
          saveState();
          renderStats();
        });
      });
    }

    // -------------------------
    // INBOX / CHECKLIST
    // -------------------------
    const columnsConfig = [
      {
        key: "aProcessar",
        title: "A PROCESSAR",
        tag: "Entrou agora",
      },
      {
        key: "alta",
        title: "ALTA",
        tag: "Impacto direto",
      },
      {
        key: "media",
        title: "MÃ‰DIA",
        tag: "Importante, nÃ£o urgente",
      },
      {
        key: "delegar",
        title: "DELEGAR",
        tag: "Equipe / parceiros",
      },
    ];

    function renderInbox() {
      const container = document.getElementById("columns");
      container.innerHTML = "";

      columnsConfig.forEach((col) => {
        const columnEl = document.createElement("div");
        columnEl.className = "column";

        const headerEl = document.createElement("div");
        headerEl.className = "column-header";

        const titleEl = document.createElement("div");
        titleEl.className = "column-title";
        titleEl.textContent = col.title;

        const tagEl = document.createElement("div");
        tagEl.className = "column-tag";
        tagEl.textContent = col.tag;

        headerEl.appendChild(titleEl);
        headerEl.appendChild(tagEl);
        columnEl.appendChild(headerEl);

        const listEl = document.createElement("ul");
        listEl.className = "task-list";

        const tasks = state.inbox[col.key] || [];

        tasks.forEach((task) => {
          const li = document.createElement("li");
          li.className = "task" + (task.done ? " done" : "");
          li.dataset.taskId = task.id;

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = task.done;

          checkbox.addEventListener("click", (e) => {
            e.stopPropagation();
            task.done = checkbox.checked;
            if (task.done) {
              li.classList.add("done");
              task.completedAt = new Date().toISOString();
            } else {
              li.classList.remove("done");
              delete task.completedAt;
            }
            saveState();
          });

          const textWrapper = document.createElement("div");
          textWrapper.className = "task-text";

          const mainText = document.createElement("div");
          mainText.textContent = task.text;
          textWrapper.appendChild(mainText);

          if (task.tag) {
            const tag = document.createElement("div");
            tag.className = "task-tag";
            tag.textContent = task.tag;
            textWrapper.appendChild(tag);
          }

          const actionsWrapper = document.createElement("div");
          actionsWrapper.className = "task-actions";

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "task-action-btn";
          deleteBtn.innerHTML = "ğŸ—‘ï¸";
          deleteBtn.title = "Remover tarefa";

          deleteBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (confirm("Remover esta tarefa permanentemente?")) {
              const idx = state.inbox[col.key].findIndex(t => t.id === task.id);
              if (idx > -1) {
                state.inbox[col.key].splice(idx, 1);
                saveState();
                renderInbox();
              }
            }
          });

          actionsWrapper.appendChild(deleteBtn);

          li.appendChild(checkbox);
          li.appendChild(textWrapper);
          li.appendChild(actionsWrapper);
          listEl.appendChild(li);
        });

        columnEl.appendChild(listEl);

        // FormulÃ¡rio para adicionar novas tarefas
        const footer = document.createElement("div");
        footer.className = "task-footer";

        const form = document.createElement("form");
        form.className = "task-form";

        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "Nova tarefa...";
        input.className = "task-input";

        const btn = document.createElement("button");
        btn.type = "submit";
        btn.textContent = "+";
        btn.className = "task-add-btn";

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const value = input.value.trim();
          if (!value) return;

          const tagOptions = [
            "Empresa Â· Propostas_Contratos",
            "Artista Â· Midia_Jornal_TV_Radio",
            "Artista Â· Fotos_Profissionais",
            "DireÃ§Ã£o Criativa Â· VÃ­deos_de_Show",
            "Empresa Â· Tabelas_Precos_Planilhas",
            "Empresa Â· Notas_Fiscais_Pagamentos"
          ];
          
          const tag = prompt("Selecione a categoria da tarefa:\n\n" + 
            tagOptions.map((opt, i) => `${i+1}. ${opt}`).join('\n'), "1");
          
          let selectedTag = "";
          if (tag !== null) {
            const tagIndex = parseInt(tag) - 1;
            if (tagIndex >= 0 && tagIndex < tagOptions.length) {
              selectedTag = tagOptions[tagIndex];
            } else if (tag.trim() !== "") {
              selectedTag = tag;
            }
          }
          
          const newTask = {
            id: "t_" + Date.now(),
            text: value,
            done: false,
            tag: selectedTag,
            createdAt: new Date().toISOString()
          };
          state.inbox[col.key].push(newTask);
          saveState();
          input.value = "";
          renderInbox();

          createTaskFile(newTask, col.title);
        });

        form.appendChild(input);
        form.appendChild(btn);
        footer.appendChild(form);
        columnEl.appendChild(footer);

        container.appendChild(columnEl);
      });
    }

    // -------------------------
    // MÃ“DULOS / NÃšCLEOS (COM LINKS)
    // -------------------------
    const modules = {
      inbox: {
        title: "00 Â· Inbox Operacional",
        subtitle: "Tudo chega aqui primeiro. Depois vocÃª decide: fazer, delegar, agendar ou arquivar.",
        tag: "Entrada de tudo",
        body: `
          <p>Use a Inbox como seu <strong>cÃ©rebro externo</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">01_âš¡ A_PROCESSAR</span> â€“ coisas que chegaram e ainda nÃ£o foram decididas.</li>
            <li><span class="module-item-label">02_ğŸ‘¥ DELEGAR_EQUIPE</span> â€“ tarefas que outra pessoa pode executar.</li>
            <li><span class="module-item-label">03_ğŸ’¡ INSPIRACOES_RAPIDAS</span> â€“ ideias, rabiscos, flashes criativos.</li>
            <li><span class="module-item-label">04_ğŸŒ REFERENCIAS_EXTERNAS</span> â€“ prints, links, PDFs que valem ser guardados.</li>
          </ul>
          <p class="module-hint">
            Na prÃ¡tica: viu algo? joga na Inbox. Em outro momento, vocÃª abre o painel e decide
            para qual nÃºcleo mandar (Artista, Empresa, Agenda, etc.).
          </p>
          <div class="module-links">
            <a href="https://web.whatsapp.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ’¬</span><span>WhatsApp Web</span>
            </a>
            <a href="https://calendar.google.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“…</span><span>Google Agenda</span>
            </a>
            <a href="https://web.agendor.com.br/entrar/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“Š</span><span>Agendor</span>
            </a>
            <a href="https://docs.google.com/spreadsheets/d/1iwtQoSlaRhUW115wmPv-7qYuslF4J5jcg41RzrgX7e4/edit" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“ˆ</span><span>Planilha Financeira</span>
            </a>
            <a href="https://getmozart.ai/app" target="_blank" class="link-chip">
              <span class="emoji">ğŸ¤–</span><span>Mozart AI</span>
            </a>
            <a href="https://mail.zoho.com/zm/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“§</span><span>Zoho Mail</span>
            </a>
            <a href="https://www.notion.so/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ““</span><span>Notion</span>
            </a>
            <a href="https://www.youtube.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ¬</span><span>YouTube</span>
            </a>
          </div>
        `,
      },

      artista: {
        title: "01 Â· Artista RogÃ©rio Ferdynan",
        subtitle: "Tudo que sustenta a imagem, repertÃ³rio e material artÃ­stico do palco.",
        tag: "NÃºcleo artÃ­stico",
        body: `
          <p>Espelha a pasta <strong>01_ğŸ¤ ARTISTA_ROGERIO_FERDYNAN</strong> do seu sistema:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ“¸ Fotos_Profissionais</span> â€“ estÃºdio, ao vivo, bastidores, com fÃ£s.</li>
            <li><span class="module-item-label">ğŸ¥ Videos_de_Show</span> â€“ RAW, ediÃ§Ã£o, final, VS_Show, backups.</li>
            <li><span class="module-item-label">ğŸµ Repertorio</span> â€“ setlists, letras, blocos temÃ¡ticos, ensaios.</li>
            <li><span class="module-item-label">ğŸ–¼ï¸ Divulgacao_Capas_Stories</span> â€“ feed, stories, capas, thumbnails.</li>
          </ul>
          <p class="module-hint">
            Quando uma tarefa Ã© sobre <strong>imagem, repertÃ³rio ou material artÃ­stico</strong>,
            ela nasce na Inbox, mas o arquivo final vive neste nÃºcleo.
          </p>
          <div class="module-links">
            <a href="https://artists.spotify.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ§</span><span>Spotify for Artists</span>
            </a>
            <a href="https://artists.bandsintown.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“</span><span>Bandsintown</span>
            </a>
            <a href="https://linkr.bio/rogerioferdynan" target="_blank" class="link-chip">
              <span class="emoji">ğŸŒ</span><span>Linkr.bio</span>
            </a>
          </div>
        `,
      },

      empresa: {
        title: "02 Â· Empresa CNPJ Â· Ferdynan ProduÃ§Ãµes",
        subtitle: "Ferramentas para lidar com prefeitura, contratos, NF, bancos, editais.",
        tag: "Backstage da empresa",
        body: `
          <p>Espelha a pasta <strong>02_ğŸ’¼ EMPRESA_CNPJ_FERDYNAN_PRODUCOES</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ“„ Propostas_Contratos</span></li>
            <li><span class="module-item-label">ğŸ’° Notas_Fiscais_Pagamentos</span> â€“ notas, relatÃ³rios, contas bancÃ¡rias.</li>
            <li><span class="module-item-label">ğŸ§¾ CNPJ_Documentos_Oficiais</span> â€“ Receita Federal, certidÃµes, calendÃ¡rio fiscal.</li>
            <li><span class="module-item-label">ğŸ™ï¸ Clientes_Prefeituras</span> â€“ DDD37, outras cidades MG, Brasil, internacional.</li>
            <li><span class="module-item-label">ğŸ“Š Tabelas_Precos_Planilhas</span> â€“ business plan, planilhas de venda.</li>
          </ul>
          <p class="module-hint">
            Qualquer tarefa que envolve <strong>dinheiro, documento oficial ou prefeituras</strong>
            provavelmente pertence aqui.
          </p>
          <div class="module-links">
            <a href="https://docs.google.com/document/d/1UWcL2O1QFVktAEf3T7p6tkLUzY2HRiNbmHDUpDPr1xA/edit" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“„</span><span>Contratos (Docs)</span>
            </a>
            <a href="https://docs.google.com/spreadsheets/d/1iwtQoSlaRhUW115wmPv-7qYuslF4J5jcg41RzrgX7e4/edit" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“Š</span><span>Financeiro (Sheets)</span>
            </a>
          </div>
        `,
      },

      pessoal: {
        title: "03 Â· Pessoal Â· CPF RogÃ©rio Geraldo Lopes",
        subtitle: "SaÃºde, documentos, famÃ­lia, processos, organizaÃ§Ã£o pessoal.",
        tag: "VocÃª como pessoa",
        body: `
          <p>Espelha a pasta <strong>03_ğŸ‘¨â€ğŸ‘¦ PESSOAL_CPF_ROGERIO_GERALDO_LOPES</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ“œ Comprovantes_Declaracoes</span></li>
            <li><span class="module-item-label">ğŸ’Š Saude_Mental_Suplementacao</span></li>
            <li><span class="module-item-label">ğŸ‘¦ Filho_Mikael</span></li>
          </ul>
        `,
      },

      direcao: {
        title: "04 Â· DireÃ§Ã£o Criativa & ConteÃºdo",
        subtitle: "MÃºsicas, campanhas, reels, estÃ©tica, parcerias artÃ­sticas.",
        tag: "CÃ©rebro criativo",
        body: `
          <p>Espelha a pasta <strong>04_ğŸ§  DIRECAO_CRIATIVA_CONTEUDO</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ“¢ Posts_Prontos</span></li>
            <li><span class="module-item-label">ğŸ¬ Modelos_Reels</span></li>
            <li><span class="module-item-label">ğŸ§ Musicas_Em_Andamento</span></li>
          </ul>
          <p class="module-hint">
            Quando a tarefa Ã© <strong>criar, refinar ou pensar conceito</strong>,
            ela provavelmente termina aqui.
          </p>
          <div class="module-links">
            <a href="https://www.canva.com/pt_br/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ¨</span><span>Canva</span>
            </a>
            <a href="https://commercepro.capcut.com/ai-video-generator-v2/result" target="_blank" class="link-chip">
              <span class="emoji">ğŸ¬</span><span>CapCut</span>
            </a>
            <a href="https://chatgpt.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ¤–</span><span>ChatGPT</span>
            </a>
            <a href="https://gemini.google.com/app" target="_blank" class="link-chip">
              <span class="emoji">ğŸ§ </span><span>Gemini</span>
            </a>
          </div>
        `,
      },

      agenda: {
        title: "05 Â· Agenda & LogÃ­stica",
        subtitle: "Shows confirmados, em negociaÃ§Ã£o, deslocamentos, equipe, equipamentos.",
        tag: "OperaÃ§Ã£o de palco",
        body: `
          <p>Espelha a pasta <strong>05_ğŸ“… AGENDA_LOGISTICA</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸŸï¸ Shows_Confirmados</span></li>
            <li><span class="module-item-label">ğŸ’¬ Shows_Negociacao</span></li>
          </ul>
          <div class="module-links">
            <a href="https://trello.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“Œ</span><span>Trello</span>
            </a>
            <a href="https://web.whatsapp.com/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ’¬</span><span>WhatsApp Web</span>
            </a>
          </div>
        `,
      },

      backup: {
        title: "06 Â· Backup / Arquivo Morto",
        subtitle: "Tudo que nÃ£o Ã© mais da rotina, mas vocÃª nÃ£o quer perder de vista.",
        tag: "MemÃ³ria do sistema",
        body: `
          <p>Espelha a pasta <strong>06_ğŸ”’ BACKUP_ARQUIVO_MORTO</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ•°ï¸ Fotos_Antigas</span></li>
            <li><span class="module-item-label">ğŸ—ƒï¸ Pastas_Antigas</span></li>
          </ul>
        `,
      },

      venda: {
        title: "07 Â· Venda Mensal Â· MissÃ£o",
        subtitle: "Tudo que coloca show novo na agenda e dinheiro entrando.",
        tag: "Motor comercial",
        body: `
          <p>Espelha a pasta <strong>07_ğŸ’¥ VENDA_MENSAL_MISSAO</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ“° Cartazes_Atualizados</span></li>
            <li><span class="module-item-label">ğŸ“˜ Portfolio_PDF</span></li>
          </ul>
          <div class="module-links">
            <a href="https://b2bleads.com.br/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ“‡</span><span>B2B Leads</span>
            </a>
            <a href="https://calculadora-freelae.web.app/" target="_blank" class="link-chip">
              <span class="emoji">ğŸ§®</span><span>Calculadora Freelancer</span>
            </a>
          </div>
        `,
      },

      centro: {
        title: "08 Â· Centro de Controle & ConexÃµes",
        subtitle: "Mapas, fluxos, integraÃ§Ãµes, modelos que conectam tudo.",
        tag: "Arquitetura do sistema",
        body: `
          <p>Espelha a pasta <strong>08_ğŸ§© CENTRO_CONTROLE_CONEXOES</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ—ºï¸ Mapa_Geral_Pastas</span></li>
            <li><span class="module-item-label">ğŸ§¾ Fluxos_Checklists</span></li>
          </ul>
        `,
      },

      rede: {
        title: "09 Â· Rede Global",
        subtitle: "ConexÃµes com EUA, Europa, Latam, parcerias globais.",
        tag: "ExpansÃ£o",
        body: `
          <p>Espelha a pasta <strong>09_ğŸŒ REDE_GLOBAL</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ‡ºğŸ‡¸ EUA_CANADA</span></li>
            <li><span class="module-item-label">ğŸ‡ªğŸ‡º EUROPA</span></li>
          </ul>
        `,
      },

      modelos: {
        title: "10 Â· Modelos Oficiais",
        subtitle: "ApresentaÃ§Ãµes, docs, planilhas, identidade visual.",
        tag: "Base oficial",
        body: `
          <p>Espelha a pasta <strong>10_ğŸ§¾ MODELOS_OFICIAIS</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ§  Apresentacoes</span></li>
            <li><span class="module-item-label">ğŸ“„ Docs</span></li>
          </ul>
        `,
      },

      admin: {
        title: "11 Â· Admin do Sistema",
        subtitle: "Atalhos, scripts, regras de backup e deduplicaÃ§Ã£o.",
        tag: "Bastidor tÃ©cnico",
        body: `
          <p>Espelha a pasta <strong>11_ğŸ§° ADMIN_SISTEMA</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ”— _ATALHOS</span></li>
            <li><span class="module-item-label">âš™ï¸ AdministraÃ§Ã£o, scripts e atalhos internos</span></li>
          </ul>
        `,
      },

      resultados: {
        title: "12 Â· Resultados Finais",
        subtitle: "Clientes, imprensa, social â€“ o que sai para o mundo.",
        tag: "SaÃ­da final",
        body: `
          <p>Espelha a pasta <strong>12_ğŸ¯ RESULTADOS_FINAIS</strong>:</p>
          <ul class="module-list">
            <li><span class="module-item-label">ğŸ’¼ Clientes</span></li>
            <li><span class="module-item-label">ğŸ“° Imprensa</span></li>
          </ul>
        `,
      },
    };

    function renderModule(moduleKey) {
      const module = modules[moduleKey] || modules["inbox"];
      document.getElementById("module-title").textContent = module.title;
      document.getElementById("module-subtitle").textContent = module.subtitle;
      document.getElementById("module-tag").textContent = module.tag;
      document.getElementById("module-body").innerHTML = module.body;
      currentModule = moduleKey;
    }

    function setupSidebar() {
      const list = document.getElementById("nav-list");
      list.querySelectorAll(".nav-item").forEach((item) => {
        item.addEventListener("click", () => {
          list.querySelectorAll(".nav-item").forEach((i) => i.classList.remove("active"));
          item.classList.add("active");
          const key = item.dataset.module;
          renderModule(key);
        });
      });
    }

    // -------------------------
    // COPIAR CAMINHO DA PASTA
    // -------------------------
    function copyFolderPath() {
      const folderPath = folderMap[currentModule];
      if (!folderPath) {
        alert("Caminho da pasta nÃ£o encontrado para este mÃ³dulo.");
        return;
      }

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(folderPath)
          .then(() => {
            alert(
              "âœ… Caminho copiado para a Ã¡rea de transferÃªncia!\n\n" +
              folderPath +
              "\n\nAgora abra o Explorador de Arquivos (Win + E) e cole na barra de endereÃ§o."
            );
          })
          .catch(() => fallbackCopyTextToClipboard(folderPath));
      } else {
        fallbackCopyTextToClipboard(folderPath);
      }
    }

    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      try {
        document.execCommand('copy');
        alert(
          "âœ… Caminho copiado para a Ã¡rea de transferÃªncia!\n\n" +
          text +
          "\n\nAgora abra o Explorador de Arquivos (Win + E) e cole na barra de endereÃ§o."
        );
      } catch (err) {
        alert(
          "Caminho da pasta:\n\n" +
          text +
          "\n\nCopie e cole manualmente no Explorador de Arquivos."
        );
      }
      document.body.removeChild(textArea);
    }

    // -------------------------
    // EXPORTAÃ‡ÃƒO DE TAREFAS
    // -------------------------
    function exportTasks() {
      let allTasks = [];

      if (currentModule === 'inbox') {
        columnsConfig.forEach(col => {
          const tasks = state.inbox[col.key] || [];
          tasks.forEach(task => {
            allTasks.push({
              text: task.text,
              done: task.done,
              tag: task.tag,
              priority: col.title
            });
          });
        });
      } else {
        columnsConfig.forEach(col => {
          const tasks = state.inbox[col.key] || [];
          tasks.forEach(task => {
            if (task.tag && task.tag.includes(modules[currentModule].title.split(' Â· ')[1])) {
              allTasks.push({
                text: task.text,
                done: task.done,
                tag: task.tag,
                priority: col.title
              });
            }
          });
        });
      }

      if (allTasks.length === 0) {
        alert("Nenhuma tarefa encontrada para este mÃ³dulo.");
        return;
      }

      const now = new Date();
      const dateStr = now.toLocaleDateString('pt-BR');
      const timeStr = now.toLocaleTimeString('pt-BR');

      let fileContent = `TAREFAS - ${modules[currentModule].title}\n`;
      fileContent += `Exportado em: ${dateStr} Ã s ${timeStr}\n`;
      fileContent += "=".repeat(50) + "\n\n";

      allTasks.forEach((task, index) => {
        const status = task.done ? "[âœ“] CONCLUÃDO" : "[ ] PENDENTE";
        fileContent += `${index + 1}. ${status} - ${task.text}\n`;
        fileContent += `   Prioridade: ${task.priority}\n`;
        if (task.tag) {
          fileContent += `   Tag: ${task.tag}\n`;
        }
        fileContent += "\n";
      });

      const blob = new Blob([fileContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `Tarefas_${modules[currentModule].title.replace(/[^a-zA-Z0-9]/g, '_')}_${dateStr.replace(/\//g, '-')}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      alert(`âœ… Arquivo de tarefas exportado para sua pasta de downloads.\n\nNome: ${a.download}`);
    }

    // -------------------------
    // ATA DIÃRIA
    // -------------------------
    function exportDailyReport() {
      const today = new Date().toISOString().split('T')[0];
      let completedToday = [];

      Object.values(state.inbox).forEach(column => {
        column.forEach(task => {
          if (task.done && task.completedAt && task.completedAt.startsWith(today)) {
            completedToday.push(task);
          }
        });
      });

      if (completedToday.length === 0) {
        alert("Nenhuma tarefa concluÃ­da hoje para exportar.");
        return;
      }

      const now = new Date();
      const dateStr = now.toLocaleDateString('pt-BR');
      const timeStr = now.toLocaleTimeString('pt-BR');

      let fileContent = `ATA DE ATIVIDADES DIÃRIAS - PAINEL FERDYNAN\n`;
      fileContent += `Data: ${dateStr} | Hora: ${timeStr}\n`;
      fileContent += "=".repeat(60) + "\n\n";
      fileContent += "TAREFAS CONCLUÃDAS HOJE:\n\n";

      completedToday.forEach((task, index) => {
        const completedTime = new Date(task.completedAt).toLocaleTimeString('pt-BR');
        fileContent += `${index + 1}. [${completedTime}] ${task.text}\n`;
        if (task.tag) {
          fileContent += `   ğŸ“ ${task.tag}\n`;
        }
        fileContent += "\n";
      });

      fileContent += "=".repeat(60) + "\n";
      fileContent += `Total de tarefas concluÃ­das: ${completedToday.length}\n`;
      const prod = Math.round((completedToday.length / (completedToday.length + getPendingTasksCount())) * 100);
      fileContent += `Taxa de produtividade (no painel): ${isNaN(prod) ? 0 : prod}%\n`;

      const blob = new Blob([fileContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ATA_DIARIA_${dateStr.replace(/\//g, '-')}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showNotification(`âœ… ATA diÃ¡ria exportada com ${completedToday.length} tarefas!`);
    }

    // -------------------------
    // ARQUIVO AUTOMÃTICO POR TAREFA
    // -------------------------
    function createTaskFile(task, priority) {
      if (!task.tag) return;
      
      const now = new Date();
      const dateStr = now.toLocaleDateString('pt-BR');
      const timeStr = now.toLocaleTimeString('pt-BR');
      
      let fileContent = `TAREFA: ${task.text}\n`;
      fileContent += `Criada em: ${dateStr} Ã s ${timeStr}\n`;
      fileContent += `Prioridade: ${priority}\n`;
      fileContent += `Categoria: ${task.tag}\n`;
      fileContent += `Status: ${task.done ? "CONCLUÃDO" : "PENDENTE"}\n`;
      fileContent += "=".repeat(50) + "\n\n";
      fileContent += "DESCRIÃ‡ÃƒO:\n";
      fileContent += "Adicione aqui os detalhes da tarefa...\n\n";
      fileContent += "AÃ‡Ã•ES NECESSÃRIAS:\n";
      fileContent += "- [ ] Definir prazo\n";
      fileContent += "- [ ] Alocar recursos\n";
      fileContent += "- [ ] Designar responsÃ¡vel\n\n";
      fileContent += "NOTAS:\n";
      fileContent += "â€¢ \n";
      
      const blob = new Blob([fileContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      
      const fileName = `Tarefa_${task.text.substring(0, 30).replace(/[^a-zA-Z0-9]/g, '_')}_${Date.now()}.txt`;
      a.download = fileName;
      
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification(`âœ… Arquivo criado: ${fileName}`);
    }

    // -------------------------
    // NOTIFICAÃ‡ÃƒO
    // -------------------------
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // -------------------------
    // BOOT
    // -------------------------
    function init() {
      renderStats();
      setupStatsEditing();
      renderInbox();
      setupSidebar();
      renderModule("inbox");
      updateProgressDashboard();

      document.getElementById('copy-folder-btn').addEventListener('click', copyFolderPath);
      document.getElementById('export-tasks-btn').addEventListener('click', exportTasks);
      document.getElementById('export-daily-btn').addEventListener('click', exportDailyReport);
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
